# üìò MCP Workflow Standard

<!-- üîí PROTECTED SECTION: BEGIN -->type: standard

standard_id: 4.1
logical_id: standard:mcp_workflow_standard
updated: 11 January 2025, 15:30 CET by AI Assistant
based on: [Task Master Standard](abstract://standard:task_master_standard), –≤–µ—Ä—Å–∏—è 1.4, 15 May 2025, 18:20 CET
based on: [Registry Standard](abstract://standard:registry_standard), –≤–µ—Ä—Å–∏—è 5.6, 15 May 2025, 22:00 CET
integrated: Atomic Operations, Reflection Checkpoints, FastMCP Architecture, Protocol Challenge, MCP Configuration Management, Cross-Platform Support, Official MCP Specification, Dev Container Integration, Official MCP Servers Integration
version: 4.1
status: Active
tags: standard, mcp, workflow, development, configuration, devcontainer, portability, figma, http-mcp

<!-- üîí PROTECTED SECTION: END -->

---

## üõ°Ô∏è –õ–∏—Ü–µ–Ω–∑–∏—è –∏ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.** –î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é –ò–ª—å–∏ –ö—Ä–∞—Å–∏–Ω—Å–∫–æ–≥–æ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –≤ –ª—é–±—ã—Ö —Ü–µ–ª—è—Ö –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∏—Å—å–º–µ–Ω–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è –∞–≤—Ç–æ—Ä–∞. –ê–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –°–®–ê.

**Magic Rick Inc.**, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ —à—Ç–∞—Ç–µ –î–µ–ª–∞–≤—ç—Ä (–°–®–ê), –¥–µ–π—Å—Ç–≤—É–µ—Ç –æ—Ç –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞ –≤ —Ü–µ–ª—è—Ö –∑–∞—â–∏—Ç—ã –µ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –±—É–¥–µ—Ç –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞—Ç—å –ª—é–±—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –°–®–ê.

---

## üéØ –¶–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞

–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ FastMCP (Fast Model Context Protocol) workflow –∏ –∫–æ–º–∞–Ω–¥, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º. –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö Task Master Standard, Registry Standard –∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º Python MCP SDK. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π FastMCP API –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏.

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 4.1

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Figma Dev Mode MCP Server** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP-based MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
- **HTTP Transport –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
- **Troubleshooting –¥–ª—è HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤** - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤** - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- **–†–∞—Å—à–∏—Ä–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP transport
- **–û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - –≤–∫–ª—é—á–µ–Ω—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
- **–£–ª—É—á—à–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ HTTP —Å–µ—Ä–≤–µ—Ä–æ–≤
- **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Figma –∏ Linear MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

---

## üîÑ MCP –ü—Ä–∏–º–∏—Ç–∏–≤—ã: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ MCP –ø—Ä–∏–º–∏—Ç–∏–≤—ã (—Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏):**

**MCP** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ **3 –ø—Ä–∏–º–∏—Ç–∏–≤–∞**:

1. **Tools** (`@mcp.tool()`) - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
2. **Resources** (`@mcp.resource()`) - —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º  
3. **Prompts** (`@mcp.prompt()`) - –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ JSON-RPC –º–µ—Ç–æ–¥—ã MCP:**

MCP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JSON-RPC 2.0 –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏:

#### **Tools –º–µ—Ç–æ–¥—ã:**
- `tools/list` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `tools/call` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

#### **Resources –º–µ—Ç–æ–¥—ã:**
- `resources/list` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- `resources/read` - –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–µ—Å—É—Ä—Å–∞

#### **Prompts –º–µ—Ç–æ–¥—ã:**
- `prompts/list` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- `prompts/get` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–ø—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### **FastMCP - –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–û–î–•–û–î**

**FastMCP** - —ç—Ç–æ **—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API** –ø–æ–≤–µ—Ä—Ö –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ MCP, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

#### ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ FastMCP:**

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –º–µ–Ω—å—à–µ boilerplate –∫–æ–¥–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Pydantic –º–æ–¥–µ–ª–∏
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - `ctx.fastmcp` –∏ `ctx.session` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å** - –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–õ—É—á—à–∞—è –æ—Ç–ª–∞–¥–∫–∞** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å

#### ‚ùå **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ MCP:**

- **–°–ª–æ–∂–Ω–æ—Å—Ç—å** - —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ `mcp.types`
- **Boilerplate –∫–æ–¥** - –º–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
- **–†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–≤** - —Å–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Python
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏** - –Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

**–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï FastMCP** –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π MCP —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è legacy —Å–∏—Å—Ç–µ–º –∏–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞–µ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.

### **‚ö†Ô∏è –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø –ò –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø**

#### **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è FastMCP:**

- **–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞** - `mcp.get_context()` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **–†–µ—Å—É—Ä—Å—ã —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω—ã–π URI** - URI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `file://`, `http://` –∏ —Ç.–¥.
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–≤** - –Ω–µ –≤—Å–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã –º–æ–≥—É—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** - –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏
- **Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—é

#### **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π MCP:**

- **–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å** - –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º
- **–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã** - –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã
- **Legacy –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–∏—Å—Ç–µ–º—ã
- **–û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞** - –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

#### **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**

- **API –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è** - FastMCP –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è
- **–í–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - —É–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–π
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### **–ü—Ä–∏–º–µ—Ä—ã –º–∏–≥—Ä–∞—Ü–∏–∏:**

#### **–î–æ (–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π MCP):**

```python
class MCPTool:
    def __init__(self, name: str, description: str, input_schema: Dict[str, Any]):
        self.name = name
        self.description = description
        self.input_schema = input_schema

    def execute(self, arguments: Dict[str, Any]) -> Dict[str, Any]:
        return {
            "content": [{"type": "text", "text": result}],
            "isError": False
        }
```

#### **–ü–æ—Å–ª–µ (FastMCP):**

```python
@mcp.tool()
async def my_tool(ctx: Context, param1: str, param2: int = 10) -> dict:
    """My tool description"""
    await ctx.session.send_progress_notification("Starting", 0, 100, "Processing...")
    result = await process_data(param1, param2)
    await ctx.session.send_progress_notification("Completed", 100, 100, "Success")
    return {"status": "success", "result": result}
```

---

## üîß JTBD –°—Ü–µ–Ω–∞—Ä–∏–∏

### JTBD 1: –°–æ–∑–¥–∞–Ω–∏–µ FastMCP –∫–æ–º–∞–Ω–¥—ã

**–ö–æ–≥–¥–∞** —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é FastMCP –∫–æ–º–∞–Ω–¥—É,
**–Ø —Ö–æ—á—É** —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ API,
**–ß—Ç–æ–±—ã** –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ, –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º Python SDK.

### JTBD 2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ FastMCP workflow

**–ö–æ–≥–¥–∞** –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ–∂–Ω—ã–π workflow –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö FastMCP –∫–æ–º–∞–Ω–¥,
**–Ø —Ö–æ—á—É** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—ã–≤–æ–¥–æ–º,
**–ß—Ç–æ–±—ã** –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ç–∏–ø–∏–∑–∞—Ü–∏—é –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞.

### JTBD 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è FastMCP –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É

**–ö–æ–≥–¥–∞** –Ω–æ–≤–∞—è FastMCP –∫–æ–º–∞–Ω–¥–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏,
**–Ø —Ö–æ—á—É** –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤,
**–ß—Ç–æ–±—ã** –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

### JTBD 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

**–ö–æ–≥–¥–∞** —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞,
**–Ø —Ö–æ—á—É** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏—è,
**–ß—Ç–æ–±—ã** –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±—ã—Å—Ç—Ä—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –æ—Ç–ª–∞–¥–∫—É –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. FastMCP –ü—Ä–∏–º–∏—Ç–∏–≤—ã (Primitives)

–°–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É Python MCP SDK](https://github.com/modelcontextprotocol/python-sdk), –∫–∞–∂–¥—ã–π FastMCP —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API:

#### Tools (–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)

```python
from mcp.server.fastmcp import FastMCP

mcp = FastMCP("heroes-advising-platform")

@mcp.tool(structured_output=False)
def heroes_workflow(workflow_name: str) -> str:
    """Execute Heroes workflow with atomic operations"""
    try:
        # Execute atomic operation
        result = execute_workflow_logic(workflow_name)
        return f"Workflow {workflow_name} completed: {result}"
    except Exception as e:
        return f"Error executing workflow {workflow_name}: {str(e)}"
```

#### Resources (–†–µ—Å—É—Ä—Å—ã)

```python
@mcp.resource("file://standards/registry.json")
def standards_registry() -> str:
    """Current standards registry"""
    return json.dumps(get_standards_registry(), indent=2)

@mcp.resource("file://project/config.json")
def project_config() -> str:
    """Project configuration"""
    return json.dumps(get_project_config(), indent=2)
```

#### Prompts (–ü—Ä–æ–º–ø—Ç—ã)

```python
@mcp.prompt()
def generate_analysis_prompt(context: str, analysis_type: str) -> str:
    """Generate analysis prompt based on context and type"""
    return f"""
    Analyze the following {analysis_type}:
    
    Context: {context}
    
    Please provide:
    1. Key insights
    2. Recommendations
    3. Action items
    """

@mcp.prompt()
def generate_documentation_prompt(code: str, language: str) -> str:
    """Generate documentation prompt for code"""
    return f"""
    Generate comprehensive documentation for this {language} code:
    
    ```{language}
    {code}
    ```
    
    Include:
    - Function descriptions
    - Parameter explanations
    - Usage examples
    - Error handling notes
    """
```

#### Structured Output (–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥)

```python
# –î–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ structured_output=True (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
@mcp.tool()
def execute_workflow(workflow_name: str) -> dict:
    """Execute workflow with structured output"""
    start_time = time.time()
    result = execute_workflow_logic(workflow_name)
    execution_time = time.time() - start_time

    return {
        "workflow_name": workflow_name,
        "status": "completed",
        "execution_time": execution_time,
        "output": result
    }
```

### 2. –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π

- **–ö–∞–∂–¥–∞—è FastMCP –∫–æ–º–∞–Ω–¥–∞ = –æ—Ç–¥–µ–ª—å–Ω–∞—è –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è**
- **Public Methods**: ‚â§ 25 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ (–æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã workflow)
- **Private Methods**: ‚â§ 20 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã)
- **Complex Data Structures**: –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏** —á–µ—Ä–µ–∑ `ctx.session.send_progress_notification()`
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞** –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥** —á–µ—Ä–µ–∑ Pydantic –º–æ–¥–µ–ª–∏

### 3. Reflection Checkpoints (Registry Standard v5.4)

–ö–∞–∂–¥–∞—è FastMCP –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å:

```python
@mcp.tool(structured_output=False)
def reflection_checkpoint(operation: str, data: dict) -> str:
    """Create reflection checkpoint - Registry Standard v5.4"""
    checkpoint = {
        "timestamp": datetime.now().isoformat(),
        "operation": operation,
        "data": data,
        "status": "pending"
    }

    # –õ–æ–≥–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    logger.info(f"Reflection checkpoint: {operation}")
    
    return f"Checkpoint created: {operation} at {checkpoint['timestamp']}"
```

### 4. FastMCP Server Architecture

–°–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É Python MCP SDK](https://github.com/modelcontextprotocol/python-sdk), FastMCP —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

#### –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```python
from mcp.server.fastmcp import FastMCP
from pydantic import BaseModel, Field

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
mcp = FastMCP(
    "heroes-advising-platform",
    debug=True,
    log_level="INFO"
)

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
@mcp.tool(structured_output=False)
def standards_management(
    action: str,
    standard_id: str,
    content: dict = None
) -> str:
    """Manage project standards with reflection checkpoints"""
    try:
        # Execute atomic operation
        result = execute_standards_operation(action, standard_id, content or {})
        return f"Standards management completed: {action} for {standard_id}"
    except Exception as e:
        return f"Error in standards management: {str(e)}"
```

### 5. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

```python
@mcp.tool(structured_output=False)
def server_info() -> str:
    """Get information about the current server."""
    return f"Server: {mcp.name}, Status: running"
```

### 6. MCP –ü—Ä–∏–º–∏—Ç–∏–≤—ã vs Internal Function Classification

#### ‚úÖ **–î–û–õ–ñ–ù–´ –±—ã—Ç—å MCP –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏ (Tools/Resources/Prompts):**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è** - —Ç–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —Å–¥–µ–ª–∞—Ç—å
- **–û—Å–Ω–æ–≤–Ω—ã–µ workflow** - –≥–ª–∞–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã  
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏** - API –≤—ã–∑–æ–≤—ã
- **–ü—É–±–ª–∏—á–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - —Ç–æ, —á—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞—Ä—É–∂—É
- **–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º** - —Ñ–∞–π–ª—ã, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è AI, —à–∞–±–ª–æ–Ω—ã

#### ‚ùå **–ù–ï –î–û–õ–ñ–ù–´ –±—ã—Ç—å MCP –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏:**
- **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- **–£—Ç–∏–ª–∏—Ç—ã** - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏, –ø–∞—Ä—Å–∏–Ω–≥
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤

#### üìã **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π | MCP Tool | MCP Resource | MCP Prompt | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è |
|----------|----------|--------------|------------|-------------------|
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| **–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞** | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–ü—É–±–ª–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è/—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

#### üîß **–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:**

```python
# ‚úÖ MCP TOOL - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
@mcp.tool()
async def make_mkdoc(project_path: str, clean: bool = True) -> dict:
    """–°–æ–±–∏—Ä–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é MkDocs –∏–∑ markdown —Ñ–∞–π–ª–æ–≤"""
    manager = DocumentationManager(project_path)
    return await manager.build(clean)

# ‚úÖ MCP RESOURCE - –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
@mcp.resource("file://project/mkdocs.yml")
async def mkdocs_config() -> str:
    """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MkDocs –ø—Ä–æ–µ–∫—Ç–∞"""
    return Path("mkdocs.yml").read_text()

# ‚úÖ MCP PROMPT - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
@mcp.prompt()
async def generate_docs_prompt(code: str, language: str) -> str:
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫–æ–¥–∞"""
    return f"Generate documentation for this {language} code:\n\n```{language}\n{code}\n```"

# ‚ùå –í–ù–£–¢–†–ï–ù–ù–Ø–Ø –§–£–ù–ö–¶–ò–Ø - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
async def _validate_project_path(path: str) -> bool:
    """–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É"""
    return Path(path).exists() and (Path(path) / "mkdocs.yml").exists()

# ‚ùå –í–ù–£–¢–†–ï–ù–ù–Ø–Ø –§–£–ù–ö–¶–ò–Ø - —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
async def _create_symlink(source: Path, target: Path) -> None:
    """–°–æ–∑–¥–∞–µ—Ç —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É"""
    target.symlink_to(source)
```

---

## üìã –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è MCP –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤

### 1. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤

- **Tools**: `verb_noun` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `validate_dependencies`, `ghost_publish_analysis`)
- **Resources**: `noun_description` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `standards_registry`, `project_config`)
- **Prompts**: `generate_noun_prompt` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `generate_analysis_prompt`, `generate_docs_prompt`)
- **–†–µ–≥–∏—Å—Ç—Ä**: snake_case –¥–ª—è Python —Ñ—É–Ω–∫—Ü–∏–π
- **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –∏–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã —á–µ—Ç–∫–æ –æ—Ç—Ä–∞–∂–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è, –ù–ï –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```python
@mcp.tool(structured_output=False)
def execute_workflow(workflow_name: str, parameters: dict = None, timeout: int = 30) -> str:
    """
    Execute workflow with parameters

    Args:
        workflow_name: Name of the workflow to execute
        parameters: Workflow parameters (optional)
        timeout: Timeout in seconds (default: 30)

    Returns:
        str: Execution result
    """
    try:
        start_time = time.time()
        result = execute_workflow_logic(workflow_name, parameters or {})
        execution_time = time.time() - start_time
        
        return f"Workflow {workflow_name} completed in {execution_time:.2f}s: {result}"
    except Exception as e:
        return f"Error executing workflow {workflow_name}: {str(e)}"
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
@mcp.tool(structured_output=False)
def safe_operation(operation_name: str) -> str:
    """Handle errors with proper logging and reflection"""
    try:
        # Execute operation
        result = execute_operation(operation_name)
        return f"Operation {operation_name} completed successfully: {result}"

    except Exception as e:
        error_msg = f"Operation {operation_name} failed: {str(e)}"
        logger.error(error_msg)
        return error_msg
```

### 4. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```python
@mcp.tool()
def validate_dependencies(package_name: str, version_constraint: str, environments: list = None) -> str:
    """Validate project dependencies"""
    try:
        # –í–∞–ª–∏–¥–∞—Ü–∏—è package_name
        if not package_name or len(package_name.strip()) == 0:
            return "Error: Package name cannot be empty"
        
        if not package_name.replace('-', '').replace('_', '').isalnum():
            return "Error: Package name contains invalid characters"
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è version_constraint
        import re
        if not re.match(r'^[<>=!~^]*\d+\.\d+(\.\d+)?.*$', version_constraint):
            return "Error: Invalid version constraint format"
        
        # Execute validation
        result = validate_dependency_logic(package_name, version_constraint)
        return f"Dependency {package_name} validated successfully: {result}"
        
    except Exception as e:
        return f"Error validating dependency: {str(e)}"
```

---

## üîÑ Workflow Development Patterns

### 1. Atomic Workflow Pattern

```python
from pydantic import BaseModel, Field
from typing import List, Dict, Any
from mcp.types import Context

class WorkflowStep(BaseModel):
    name: str = Field(description="Step name")
    function: str = Field(description="Function to execute")
    parameters: dict = Field(default_factory=dict, description="Step parameters")

class WorkflowResult(BaseModel):
    workflow_name: str = Field(description="Workflow name")
    steps_completed: List[str] = Field(description="Completed steps")
    total_steps: int = Field(description="Total number of steps")
    status: str = Field(description="Workflow status")
    results: List[dict] = Field(description="Step results")

@mcp.tool()
async def execute_atomic_workflow(
    workflow_name: str,
    steps: List[WorkflowStep]
) -> WorkflowResult:
    """Execute workflow with atomic steps and reflection checkpoints"""
    results = []
    completed_steps = []

    # –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
    context = mcp.get_context()
    await context.info(f"Starting workflow: {workflow_name}")

    for i, step in enumerate(steps):
        try:
            # Reflection checkpoint before each step
            await context.info(f"Starting step {i + 1}/{len(steps)}: {step.name}")

            # Execute atomic step
            step_result = await execute_workflow_step(step)
            results.append(step_result)
            completed_steps.append(step.name)

            await context.info(f"Completed step {i + 1}/{len(steps)}: {step.name}")

        except Exception as e:
            # Rollback workflow
            await rollback_workflow(completed_steps, context)
            raise e

    await context.info(f"Workflow completed: {workflow_name}")

    return WorkflowResult(
        workflow_name=workflow_name,
        steps_completed=completed_steps,
        total_steps=len(steps),
        status="completed",
        results=results
    )
```

### 2. FastMCP Tool Registry Pattern

```python
# –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
from mcp.server.fastmcp import FastMCP

mcp = FastMCP("heroes-advising-platform")

# Ghost CMS Tools
@mcp.tool()
async def ghost_publish_analysis(
    content: str = Field(description="Content to publish"),
    title: str = Field(description="Post title")
) -> dict:
    """Publish analysis to Ghost CMS"""
    result = await publish_to_ghost(content, title)
    return {"status": "published", "title": title, "url": result["url"]}

# Dependency Management Tools
@mcp.tool()
async def dependency_management(
    action: str = Field(enum=["install", "update", "remove"], description="Action to perform"),
    package: str = Field(description="Package name")
) -> dict:
    """Manage project dependencies"""
    result = await manage_dependency(action, package)
    return {"status": "success", "action": action, "package": package, "result": result}

# Standards Management Tools
@mcp.tool()
async def standards_management(
    action: str = Field(enum=["create", "update", "archive"], description="Action to perform"),
    standard_id: str = Field(description="Standard identifier"),
    content: dict = Field(default_factory=dict, description="Standard content")
) -> dict:
    """Manage project standards with reflection checkpoints"""
    result = await manage_standard(action, standard_id, content)
    return {"status": "success", "action": action, "standard_id": standard_id, "result": result}
```

### 3. Configuration Management

```python
# –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ FastMCP
mcp = FastMCP(
    "heroes-advising-platform",
    debug=True,
    log_level="INFO"
)

# –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
@mcp.tool()
async def get_server_config() -> dict:
    """Get current server configuration"""
    return {
        "name": mcp.name,
        "debug_mode": mcp.debug,
        "log_level": mcp.log_level
    }
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### 1. Unit Testing Pattern

```python
import pytest
from mcp.shared.memory import create_connected_server_and_client_session

async def test_fastmcp_command_atomic_operation():
    """Test atomic operation of FastMCP command"""
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
    test_mcp = FastMCP("test-server")

    @test_mcp.tool()
    async def test_workflow(workflow_name: str) -> dict:
        return {"status": "completed", "workflow_name": workflow_name}

    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
    result = await test_mcp.call_tool("test_workflow", {"workflow_name": "test"})

    assert result[1]["status"] == "completed"
    assert result[1]["workflow_name"] == "test"

@pytest.mark.asyncio
async def test_structured_output_validation():
    """Test Pydantic model validation in FastMCP"""
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
    test_mcp = FastMCP("test-server")

    class TestResult(BaseModel):
        workflow_name: str
        status: str

    @test_mcp.tool()
    async def test_workflow(workflow_name: str) -> TestResult:
        return TestResult(workflow_name=workflow_name, status="completed")

    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥
    result = await test_mcp.call_tool("test_workflow", {"workflow_name": "test"})

    assert result[1]["workflow_name"] == "test"
    assert result[1]["status"] == "completed"
```

### 2. Integration Testing

```python
async def test_workflow_integration():
    """Test workflow integration with multiple FastMCP commands"""
    async with create_connected_server_and_client_session(mcp._mcp_server) as client:
        # –°–æ–∑–¥–∞–µ–º workflow steps
        steps = [
            {"name": "validate_input", "function": "validate_dependencies", "parameters": {"package": "test"}},
            {"name": "process_data", "function": "standards_management", "parameters": {"action": "create"}},
            {"name": "generate_output", "function": "ghost_publish_analysis", "parameters": {"title": "Test"}}
        ]

        result = await client.call_tool("execute_atomic_workflow", {
            "workflow_name": "test_workflow",
            "steps": steps
        })

        assert result.structuredContent["status"] == "completed"
        assert len(result.structuredContent["steps_completed"]) == len(steps)
        assert result.structuredContent["total_steps"] == len(steps)
```

### 3. FastMCP Protocol Testing

```python
async def test_fastmcp_protocol_compliance():
    """Test FastMCP protocol compliance"""
    async with create_connected_server_and_client_session(mcp._mcp_server) as client:
        # Test tool discovery
        tools = await client.list_tools()
        assert len(tools) > 0

        # Test tool execution with structured output
        for tool in tools:
            if tool.name == "heroes_workflow":
                result = await client.call_tool(tool.name, {"workflow_name": "test"})
                assert result.structuredContent is not None
                break

        # Test resource access
        resources = await client.list_resources()
        assert len(resources) >= 0  # Resources are optional
```

### 4. Performance Testing

```python
import time
import asyncio

async def test_command_performance():
    """Test FastMCP command performance and timeout handling"""
    async with create_connected_server_and_client_session(mcp._mcp_server) as client:
        start_time = time.time()

        result = await client.call_tool("execute_workflow", {
            "workflow_name": "performance_test",
            "parameters": {"large_dataset": "..." * 1000}
        })

        execution_time = time.time() - start_time
        assert execution_time < 30  # 30 second timeout
        assert result.structuredContent["status"] == "completed"

async def test_concurrent_execution():
    """Test concurrent FastMCP command execution"""
    async with create_connected_server_and_client_session(mcp._mcp_server) as client:
        tasks = []
        for i in range(5):
            task = client.call_tool("heroes_workflow", {"workflow_name": f"concurrent_test_{i}"})
            tasks.append(task)

        results = await asyncio.gather(*tasks)

        for result in results:
            assert result.structuredContent["status"] == "completed"
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### 1. Performance Metrics

- **Execution Time**: –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
- **Success Rate**: –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
- **Error Rate**: –ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø–∞–º
- **Resource Usage**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU

### 2. Quality Metrics

- **Code Coverage**: –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- **Complexity**: –¶–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (–º–∞–∫—Å–∏–º—É–º 10)
- **Maintainability**: –ò–Ω–¥–µ–∫—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
- **Reliability**: –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 3. Reflection Checkpoint Metrics

```python
@mcp.tool()
async def get_reflection_metrics() -> dict:
    """Get metrics from reflection checkpoints"""
    # –í FastMCP –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç
    # –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º

    return {
        "total_checkpoints": 0,  # –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º
        "successful_operations": 0,
        "failed_operations": 0,
        "average_execution_time": 0.0,
        "recent_operations": []
    }
```

---

## üîç Protocol Challenge Integration

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏–π

–°–æ–≥–ª–∞—Å–Ω–æ [Protocol Challenge](abstract://standard:protocol_challenge), –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ FastMCP –∫–æ–º–∞–Ω–¥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

#### 1. –ê–Ω–∞–ª–∏–∑ —Å —Ä–∞–∑–Ω—ã—Ö —Ç–æ—á–µ–∫ –∑—Ä–µ–Ω–∏—è

- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ FastMCP —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ Python SDK
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞**: –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **–ë–∏–∑–Ω–µ—Å-–ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞**: –¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### 2. –í—ã—è–≤–ª–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö –¥–æ–ø—É—â–µ–Ω–∏–π

```python
@mcp.tool()
async def analyze_fastmcp_assumptions(command_name: str, implementation: dict) -> dict:
    """Analyze FastMCP command for hidden assumptions"""
    assumptions = []

    # Technical assumptions
    if "async" in str(implementation):
        assumptions.append("Assumes async runtime environment")

    if "pydantic" in str(implementation):
        assumptions.append("Assumes Pydantic for data validation")

    # Security assumptions
    if "authentication" not in str(implementation):
        assumptions.append("Assumes secure transport layer")

    # Performance assumptions
    if "timeout" not in str(implementation):
        assumptions.append("Assumes reasonable execution time")

    # Context assumptions
    if "mcp.get_context()" in str(implementation):
        assumptions.append("Assumes FastMCP context availability")

    return {
        "command_name": command_name,
        "assumptions": assumptions,
        "risk_level": "high" if len(assumptions) > 3 else "medium",
        "recommendations": generate_assumption_recommendations(assumptions)
    }
```

#### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π

- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º**: Task Master, Registry, FastMCP
- **–ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤**: –û—à–∏–±–∫–∏, —Ç–∞–π–º–∞—É—Ç—ã, –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏**: Pydantic –º–æ–¥–µ–ª–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º Python SDK

```python
# –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å FastMCP
from mcp.server.fastmcp import FastMCP
from pydantic import BaseModel, Field
from mcp.shared.memory import create_connected_server_and_client_session

# –°–æ–∑–¥–∞–Ω–∏–µ FastMCP —Å–µ—Ä–≤–µ—Ä–∞
mcp = FastMCP(
    "heroes-advising-platform",
    debug=True,
    log_level="INFO"
)

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
class WorkflowInput(BaseModel):
    workflow_name: str = Field(description="Name of the workflow to execute")
    parameters: dict = Field(default_factory=dict, description="Workflow parameters")
    timeout: int = Field(default=30, description="Timeout in seconds")

class WorkflowResult(BaseModel):
    workflow_name: str = Field(description="Name of executed workflow")
    status: str = Field(description="Execution status")
    execution_time: float = Field(description="Execution time in seconds")
    output: dict = Field(description="Workflow output")

# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
@mcp.tool()
async def heroes_workflow(input_data: WorkflowInput) -> WorkflowResult:
    """Execute Heroes workflow with atomic operations and reflection checkpoints"""
    start_time = time.time()

    try:
        # Execute atomic operation
        result = await execute_workflow_logic(input_data.workflow_name, input_data.parameters)

        execution_time = time.time() - start_time

        return WorkflowResult(
            workflow_name=input_data.workflow_name,
            status="completed",
            execution_time=execution_time,
            output=result
        )

    except Exception as e:
        execution_time = time.time() - start_time
        raise e

# –†–µ—Å—É—Ä—Å—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
@mcp.resource("file://standards/registry.json")
async def standards_registry() -> str:
    """Current standards registry"""
    return json.dumps(get_standards_registry(), indent=2)

@mcp.resource("file://project/config.json")
async def project_config() -> str:
    """Project configuration"""
    return json.dumps(get_project_config(), indent=2)

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ SDK
async def test_fastmcp_integration():
    """Test FastMCP integration using official SDK"""
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
    test_mcp = FastMCP("test-server")

    @test_mcp.tool()
    async def test_workflow(workflow_name: str) -> dict:
        return {"status": "completed", "workflow_name": workflow_name}

    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
    result = await test_mcp.call_tool("test_workflow", {"workflow_name": "test"})

    assert result[1]["status"] == "completed"
    assert result[1]["workflow_name"] == "test"
        # Test tool discovery
        tools = await client.list_tools()
        assert len(tools) > 0

        # Test structured input/output
        result = await client.call_tool("heroes_workflow", {
            "workflow_name": "test_workflow",
            "parameters": {"param1": "value1"},
            "timeout": 30
        })

        # Verify structured output
        assert result.structuredContent is not None
        assert result.structuredContent["status"] == "completed"
        assert "execution_time" in result.structuredContent
```

### OAuth Authentication Integration

```python
# OAuth –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö FastMCP —Å–µ—Ä–≤–µ—Ä–æ–≤
from mcp.client.auth import OAuthClientProvider, TokenStorage
from mcp.client.streamable_http import streamablehttp_client

class HeroesTokenStorage(TokenStorage):
    """Token storage for Heroes platform"""

    def __init__(self):
        self.tokens = None
        self.client_info = None

    async def get_tokens(self):
        return self.tokens

    async def set_tokens(self, tokens):
        self.tokens = tokens

@mcp.tool()
async def create_oauth_client() -> dict:
    """Create OAuth client for external FastMCP servers"""
    oauth_auth = OAuthClientProvider(
        server_url="https://api.heroes-platform.com/mcp",
        client_metadata=OAuthClientMetadata(
            client_name="Heroes Advising Platform",
            redirect_uris=["http://localhost:3000/callback"],
            grant_types=["authorization_code", "refresh_token"],
            response_types=["code"],
            scope="standards:read standards:write"
        ),
        storage=HeroesTokenStorage()
    )

    return {"status": "oauth_client_created", "client_name": "Heroes Advising Platform"}
```

## üîß MCP Configuration Best Practices

### Dev Container Configuration (–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–û–î–•–û–î)

**üì¶ Dev Container –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç–∏:**

**Dev Container –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `.devcontainer/devcontainer.json` + `.devcontainer/scripts/setup-mcp-servers.sh`
   - **–ü–û–õ–ù–ê–Ø –ü–ï–†–ï–ù–û–°–ò–ú–û–°–¢–¨** –º–µ–∂–¥—É macOS, Windows, Linux
   - **–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê** MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
   - **–ï–î–ò–ù–û–ï –û–ö–†–£–ñ–ï–ù–ò–ï** –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
   - **–ò–ó–û–õ–ò–†–û–í–ê–ù–ù–û–ï –û–ö–†–£–ñ–ï–ù–ò–ï** –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π

**‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Dev Container:**
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–π –û–°
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å–µ—Ö
- **–ò–∑–æ–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π
- **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å** - –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç** - –Ω–æ–≤—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≥–æ—Ç–æ–≤ –∑–∞ 5 –º–∏–Ω—É—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ô –ü–û–î–•–û–î)

**üìÅ –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô —Ñ–∞–π–ª mcp.json:**

**–õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `.cursor/mcp.json` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
   - **–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô** —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ MCP
   - –°–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï MCP —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–æ—Å–∏–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π `~/.cursor/mcp.json`

**‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–ú:**
- `~/.cursor/mcp.json` - —Å–∏—Å—Ç–µ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ MCP —Å–µ—Ä–≤–µ—Ä—ã
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MCP

**üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:**
- **Dev Container –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –∏–º–µ–µ—Ç –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- **–õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –≥–ª–æ–±–∞–ª—å–Ω–æ–π
- Cursor –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–±–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–µ—à–∞—é—Ç—Å—è –≤ –ø–æ–ª—å–∑—É –ª–æ–∫–∞–ª—å–Ω–æ–π

### HTTP-based MCP Servers Configuration

**HTTP Transport** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ HTTP —Å–µ—Ä–≤–∏—Å—ã.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:**
- **–ù–µ —Ç—Ä–µ–±—É—é—Ç command/args** - —Ç–æ–ª—å–∫–æ URL
- **–†–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã** - –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- **–ò—Å–ø–æ–ª—å–∑—É—é—Ç SSE (Server-Sent Events)** –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **–¢—Ä–µ–±—É—é—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞** –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:**
```json
{
  "mcpServers": {
    "figma-mcp-official": {
      "url": "http://127.0.0.1:3845/mcp"
    },
    "linear-mcp": {
      "url": "https://mcp.linear.app/sse"
    }
  }
}
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:**
1. **–í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω** –ø–µ—Ä–µ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
2. **URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω** –∏–∑ Cursor
3. **–°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å MCP –ø—Ä–æ—Ç–æ–∫–æ–ª** —á–µ—Ä–µ–∑ HTTP/SSE
4. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–æ–≤

**‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

| –¢–∏–ø —Å–µ—Ä–≤–µ—Ä–∞ | –ì–¥–µ —Ä–∞–∑–º–µ—â–∞—Ç—å | –ü—Ä–∏–º–µ—Ä |
|-------------|---------------|---------|
| **–û–±—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã** | –ì–ª–æ–±–∞–ª—å–Ω–∞—è | browsermcp, jira-mcp |
| **–ü—Ä–æ–µ–∫—Ç-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ** | –õ–æ–∫–∞–ª—å–Ω–∞—è | heroes-mcp, n8n-mcp |
| **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞** | –õ–æ–∫–∞–ª—å–Ω–∞—è | test-mcp, debug-mcp |
| **Production** | –ì–ª–æ–±–∞–ª—å–Ω–∞—è | production-mcp |
| **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ HTTP** | –õ–æ–∫–∞–ª—å–Ω–∞—è | figma-mcp-official, linear-mcp |

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

#### –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏

```json
{
  "mcpServers": {
    "heroes-mcp": {
      "command": "/Users/username/project/.venv/bin/python",
      "args": ["/Users/username/project/heroes_platform/heroes_mcp/src/heroes_mcp_server.py"],
      "env": {
        "PYTHONPATH": "/Users/username/project/heroes_platform"
      }
    },
    "figma-mcp-official": {
      "url": "http://127.0.0.1:3845/mcp"
    },
    "linear-mcp": {
      "url": "https://mcp.linear.app/sse"
    },
    "browsermcp": {
      "command": "/Users/username/project/heroes_platform/node_modules/.bin/npx",
      "args": ["@browsermcp/mcp@latest"],
      "cwd": "/Users/username/project/heroes_platform"
    }
  }
}
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

```json
{
  "mcpServers": {
    "figma-mcp-official": {
      "url": "http://127.0.0.1:3845/mcp"
    },
    "linear-mcp": {
      "url": "https://mcp.linear.app/sse"
    }
  }
}
```

#### –°–º–µ—à–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (stdio + HTTP)

```json
{
  "mcpServers": {
    "local-python-server": {
      "command": "python",
      "args": ["local_server.py"],
      "env": {
        "PYTHONPATH": "/path/to/project"
      }
    },
    "figma-mcp-official": {
      "url": "http://127.0.0.1:3845/mcp"
    },
    "remote-api-server": {
      "url": "https://api.example.com/mcp"
    }
  }
}
```

### Official MCP Servers Integration

#### Figma Dev Mode MCP Server (–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π)

**Figma Dev Mode MCP Server** - —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π MCP —Å–µ—Ä–≤–µ—Ä –æ—Ç Figma, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Figma Desktop App —á–µ—Ä–µ–∑ HTTP transport.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –æ—Ç Figma
- **HTTP transport** –≤–º–µ—Å—Ç–æ stdio
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** –Ω–∞ `http://127.0.0.1:3845/mcp`
- **–¢—Ä–µ–±—É–µ—Ç Figma Desktop App** —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º MCP Server
- **SSE –ø—Ä–æ—Ç–æ–∫–æ–ª** –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```json
{
  "mcpServers": {
    "figma-mcp-official": {
      "url": "http://127.0.0.1:3845/mcp"
    }
  }
}
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Figma Desktop App:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Figma Desktop App
2. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
3. –û—Ç–∫—Ä–æ–π—Ç–µ Figma Design —Ñ–∞–π–ª
4. `Figma menu ‚Üí Preferences ‚Üí Enable local MCP Server`
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- `get_code` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–∞
- `get_metadata` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —É–∑–ª–∞
- `get_variable_defs` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∏–∑–∞–π–Ω–∞
- `get_code_connect_map` - –º–∞–ø–ø–∏–Ω–≥ Code Connect –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `get_screenshot` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ —É–∑–ª–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –í Cursor —á–∞—Ç–µ
#get_code  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Figma

# –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—Ä–µ–π–º –≤ Figma –∏ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–¥
"–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π React –∫–æ–¥ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–∞"
```

### Dev Container MCP Configuration

#### Dev Container Structure

```json
{
  "name": "Heroes Platform Development",
  "build": {
    "dockerfile": "Dockerfile",
    "context": ".."
  },
  "features": {
    "ghcr.io/devcontainers/features/python:1": {
      "version": "3.11",
      "installTools": true
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "20",
      "nodeGypDependencies": true
    }
  },
  "postCreateCommand": "bash .devcontainer/scripts/setup-heroes-platform.sh",
  "postStartCommand": "bash .devcontainer/scripts/setup-mcp-servers.sh",
  "containerEnv": {
    "PYTHONPATH": "/workspace/heroes_platform",
    "NODE_PATH": "/workspace/heroes_platform/node_modules",
    "MCP_MODE": "stdio",
    "LOG_LEVEL": "info"
  }
}
```

#### Dev Container MCP Setup Script

```bash
#!/bin/bash
set -e

echo "üîß Setting up MCP servers in Dev Container..."

# –°–æ–∑–¥–∞–Ω–∏–µ MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
cat > .cursor/mcp.json << 'EOF'
{
  "mcpServers": {
    "heroes-mcp": {
      "command": "/workspace/.venv/bin/python",
      "args": ["/workspace/heroes_platform/heroes_mcp/src/heroes_mcp_server.py"],
      "env": {
        "PYTHONPATH": "/workspace/heroes_platform/heroes_mcp"
      }
    },
    "telegram-mcp": {
      "command": "/workspace/.venv/bin/python",
      "args": ["/workspace/heroes_platform/shared/credentials_wrapper.py", "telegram", "/workspace/.venv/bin/python", "/workspace/heroes_platform/telegram-mcp/main.py"],
      "env": {
        "PYTHONPATH": "/workspace/heroes_platform"
      }
    },
    "n8n-mcp": {
      "command": "/workspace/.venv/bin/python",
      "args": ["/workspace/heroes_platform/shared/credentials_wrapper.py", "n8n", "/usr/bin/node", "/workspace/heroes_platform/n8n-mcp/dist/mcp/index.js"],
      "env": {
        "PYTHONPATH": "/workspace/heroes_platform",
        "MCP_MODE": "stdio",
        "LOG_LEVEL": "error"
      }
    }
  }
}
EOF

echo "‚úÖ MCP servers configuration completed!"
```

#### Dev Container MCP Testing

```bash
#!/bin/bash
set -e

echo "üîß Testing MCP Integration in Dev Container..."

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
test_mcp_server() {
    local server_name="$1"
    local command="$2"
    local timeout="${3:-10}"
    
    echo -n "Testing $server_name MCP server... "
    
    if timeout $timeout $command >/dev/null 2>&1 & then
        server_pid=$!
        sleep 2
        
        if kill -0 $server_pid 2>/dev/null; then
            kill $server_pid 2>/dev/null || true
            echo "‚úÖ PASSED"
        else
            echo "‚ùå FAILED (process died)"
        fi
    else
        echo "‚ùå FAILED (could not start)"
    fi
}

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
test_mcp_server "Heroes MCP" "python heroes_platform/heroes_mcp/src/heroes_mcp_server.py --test" 5
test_mcp_server "Telegram MCP" "python heroes_platform/telegram-mcp/main.py --test" 5

echo "üéâ MCP integration tests completed!"
```

### Platform-Specific Python Paths (–î–õ–Ø –õ–û–ö–ê–õ–¨–ù–û–ô –†–ê–ó–†–ê–ë–û–¢–ö–ò)

#### macOS Python Paths
- **System Python**: `/usr/local/bin/python3` (Homebrew)
- **Framework Python**: `/Library/Frameworks/Python.framework/Versions/3.11/bin/python3.11`
- **Venv Python**: `{project_root}/.venv/bin/python` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### Windows Python Paths  
- **System Python**: `C:\Python311\python.exe`
- **Venv Python**: `{project_root}\.venv\Scripts\python.exe` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **AppData Python**: `%APPDATA%\Python\Python311\python.exe`

#### Linux Python Paths
- **System Python**: `/usr/bin/python3`
- **Venv Python**: `{project_root}/.venv/bin/python` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### Dev Container Python Paths (–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï)
- **Container Python**: `/workspace/.venv/bin/python` (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö –û–°)
- **Container Node**: `/usr/bin/node` (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö –û–°)
- **Container NPX**: `/workspace/heroes_platform/node_modules/.bin/npx` (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö –û–°)

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:**
- `${HOME}` - –¥–æ–º–∞—à–Ω—è—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `${PATH}` - —Å–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è PATH
- `${VAR:-default}` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**‚ùå –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:**
- `${workspaceFolder}` - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
- –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ `./folder`

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ MCP

**üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¢–û–õ–¨–ö–û –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª mcp.json:**
   ```bash
   # –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø)
   ls -la .cursor/mcp.json
   cat .cursor/mcp.json | jq .
   
   # –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   # (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å)
   ls -la ~/.cursor/mcp.json || echo "–°–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   ```bash
   # –ï—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–æ–±–µ–∂–¥–∞–µ—Ç
   echo "–õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç"
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python
   /absolute/path/to/python --version
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Node.js
   /absolute/path/to/node --version
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã
   ls -la /absolute/path/to/script.py
   ```

4. **‚ö†Ô∏è –í–ê–ñ–ù–û: Cursor –ù–ï –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å:**
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `.cursor/mcp.json` –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å MCP —Å–µ—Ä–≤–µ—Ä—ã –≤ UI
   - Cursor –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Cursor —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Å–∏—Å—Ç–µ–º—ã

### Troubleshooting MCP Configuration

#### –ü—Ä–æ–±–ª–µ–º–∞: "spawn python ENOENT"

**–ü—Ä–∏—á–∏–Ω–∞**: Cursor –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `python`, –Ω–æ –≤ macOS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ `python3`.

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è macOS**:
```json
{
  "mcpServers": {
    "my-server": {
      "command": "/Users/username/project/.venv/bin/python",  // ‚úÖ –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ venv
      "args": ["script.py"]
    }
  }
}
```

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è Windows**:
```json
{
  "mcpServers": {
    "my-server": {
      "command": "C:\\Users\\username\\project\\.venv\\Scripts\\python.exe",  // ‚úÖ –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
      "args": ["script.py"]
    }
  }
}
```

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è Linux**:
```json
{
  "mcpServers": {
    "my-server": {
      "command": "/home/username/project/.venv/bin/python",  // ‚úÖ –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ venv
      "args": ["script.py"]
    }
  }
}
```

#### –ü—Ä–æ–±–ª–µ–º–∞: HTTP MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- Cursor –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ HTTP MCP —Å–µ—Ä–≤–µ—Ä—É
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã HTTP —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- –û—à–∏–±–∫–∏ "Connection refused" –∏–ª–∏ "Network error"

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Figma MCP —Å–µ—Ä–≤–µ—Ä–∞
curl -I http://127.0.0.1:3845/mcp

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Linear MCP —Å–µ—Ä–≤–µ—Ä–∞
curl -I https://mcp.linear.app/sse
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:**
```bash
# –î–ª—è Figma - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Desktop App –∑–∞–ø—É—â–µ–Ω
ps aux | grep -i figma

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ MCP Server –≤–∫–ª—é—á–µ–Ω –≤ Figma
# Figma menu ‚Üí Preferences ‚Üí Enable local MCP Server
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
curl -H "Origin: http://localhost:3000" -I http://127.0.0.1:3845/mcp
```

**–†–µ—à–µ–Ω–∏—è –¥–ª—è HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:**

#### Figma MCP Server –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: Figma MCP Server –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `http://127.0.0.1:3845/mcp`

**–†–µ—à–µ–Ω–∏—è:**
1. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Figma Desktop App –∑–∞–ø—É—â–µ–Ω**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ MCP Server –≤–∫–ª—é—á–µ–Ω:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Figma Desktop App
   - `Figma menu ‚Üí Preferences ‚Üí Enable local MCP Server`
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "MCP Server enabled"
3. **–û–±–Ω–æ–≤–∏—Ç–µ Figma –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏**
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Figma Desktop App**
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç 3845 –Ω–µ –∑–∞–Ω—è—Ç:**
```bash
lsof -i :3845
```

#### Linear MCP Server –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: Linear MCP Server –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `https://mcp.linear.app/sse`

**–†–µ—à–µ–Ω–∏—è:**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Linear API:**
```bash
curl -I https://mcp.linear.app/sse
```
3. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Linear**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞**

#### –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: "Connection timeout" –∏–ª–∏ "Network error"

**–†–µ—à–µ–Ω–∏—è:**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
2. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç MCP –ø—Ä–æ—Ç–æ–∫–æ–ª**
4. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π transport (stdio –≤–º–µ—Å—Ç–æ HTTP)**

**–ü—Ä–æ–±–ª–µ–º–∞**: "CORS error" –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–†–µ—à–µ–Ω–∏—è:**
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞**
2. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–µ–±-–∫–ª–∏–µ–Ω—Ç—ã**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Origin –∑–∞–≥–æ–ª–æ–≤–∫–∏**

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ HTTP MCP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
#!/bin/bash

echo "üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Figma MCP Server
echo "üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ Figma MCP Server..."
if curl -s -I http://127.0.0.1:3845/mcp | grep -q "200 OK"; then
    echo "‚úÖ Figma MCP Server –¥–æ—Å—Ç—É–ø–µ–Ω"
else
    echo "‚ùå Figma MCP Server –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
    echo "   –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Figma Desktop App –∑–∞–ø—É—â–µ–Ω –∏ MCP Server –≤–∫–ª—é—á–µ–Ω"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Linear MCP Server
echo "üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ Linear MCP Server..."
if curl -s -I https://mcp.linear.app/sse | grep -q "200 OK"; then
    echo "‚úÖ Linear MCP Server –¥–æ—Å—Ç—É–ø–µ–Ω"
else
    echo "‚ùå Linear MCP Server –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
    echo "   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –¥–æ—Å—Ç—É–ø –∫ Linear"
fi

echo "üéâ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
```

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

#### Figma Dev Mode MCP Server

**‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Figma Desktop App**
2. **–í–∫–ª—é—á–∞–π—Ç–µ MCP Server —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ** - –æ—Ç–∫–ª—é—á–∞–π—Ç–µ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Code Connect** –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–¥–∞
4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ Figma —Ñ–∞–π–ª—ã** –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è AI
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞

**‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ:**
1. **–ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ MCP Server –≤–∫–ª—é—á–µ–Ω–Ω—ã–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ**
2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ —Ñ—Ä–µ–π–º—ã** - —Ä–∞–∑–±–∏–≤–∞–π—Ç–µ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. **–ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ Code Connect** - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
4. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏–∑–∞–π–Ω—ã**

#### Linear MCP Server

**‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Linear API**
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º**
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ workflow**

**‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ:**
1. **–ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã** –±–µ–∑ fallback
2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏**

#### –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è HTTP MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

**‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
1. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã** –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–æ–≤
3. **–ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** —á–µ—Ä–µ–∑ HTTP MCP

**‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. **–ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** HTTP MCP –≤—ã–∑–æ–≤–æ–≤
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

#### –ü—Ä–æ–±–ª–µ–º–∞: Cursor –Ω–µ –≤–∏–¥–∏—Ç MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   ls -la ~/.cursor/mcp.json
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å JSON
   cat ~/.cursor/mcp.json | jq .
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏:**
   ```json
   {
     "mcpServers": {
       "heroes-mcp": {
         "command": "/absolute/path/to/python",
         "args": ["/absolute/path/to/script.py"]
       }
     }
   }
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Python –¥–æ—Å—Ç—É–ø–µ–Ω
   /absolute/path/to/python --version
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   ls -la /absolute/path/to/script.py
   ```

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`~/.cursor/mcp.json`)

**–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–ú!** –°–∏—Å—Ç–µ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç–∏.

#### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`.cursor/mcp.json`)

```json
{
  "mcpServers": {
    "heroes-mcp": {
      "command": "/Users/username/workspace/project/.venv/bin/python",
      "args": ["/Users/username/workspace/project/heroes-platform/heroes-mcp/src/heroes-mcp.py"],
      "env": {
        "PYTHONPATH": "/Users/username/workspace/project/heroes-platform"
      }
    },
    "n8n-mcp": {
      "command": "python",
      "args": ["/Users/username/workspace/project/heroes-platform/shared/credentials_wrapper.py", "n8n", "node", "/Users/username/workspace/project/heroes-platform/n8n-mcp/dist/mcp/index.js"],
      "env": {
        "PYTHONPATH": "/Users/username/workspace/project/heroes-platform"
      }
    },
    "telegram-mcp": {
      "command": "python",
      "args": ["/Users/username/workspace/project/heroes-platform/shared/credentials_wrapper.py", "telegram", "/Users/username/workspace/project/.venv/bin/python", "/Users/username/workspace/project/heroes-platform/telegram-mcp/main.py"],
      "env": {
        "PYTHONPATH": "/Users/username/workspace/project/heroes-platform"
      }
    }
  }
}
```

#### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π PYTHONPATH

```json
{
  "mcpServers": {
    "n8n-mcp": {
      "command": "python",
      "args": ["/Users/username/workspace/project/heroes-platform/shared/credentials_wrapper.py", "n8n", "node", "/Users/username/workspace/project/heroes-platform/n8n-mcp/dist/mcp/index.js"],
      "env": {
        "PYTHONPATH": "/Users/username/workspace/project/heroes-platform/shared"
      }
    }
  }
}
```

#### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –°–º–µ—à–∏–≤–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

```json
{
  "mcpServers": {
    "browsermcp": {
      "command": "npx",
      "args": ["@browsermcp/mcp@latest"]
    },
    "heroes-mcp": {
      "command": "/Users/username/workspace/project/.venv/bin/python",
      "args": ["/Users/username/workspace/project/heroes-platform/heroes-mcp/src/heroes-mcp.py"]
    }
  }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã (browsermcp) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∞ –ø—Ä–æ–µ–∫—Ç-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ (heroes-mcp) - –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π.

### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Dev Container (–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–û–î–•–û–î)

**üîÑ –ö–∞–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Dev Container:**

1. **–°–æ–∑–¥–∞–π—Ç–µ Dev Container —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É .devcontainer
   mkdir -p .devcontainer/scripts
   
   # –°–æ–∑–¥–∞–π—Ç–µ devcontainer.json
   touch .devcontainer/devcontainer.json
   
   # –°–æ–∑–¥–∞–π—Ç–µ Dockerfile
   touch .devcontainer/Dockerfile
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Dev Container –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ devcontainer.json –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ
   # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ features –¥–ª—è Python 3.11 –∏ Node.js 20
   # –î–æ–±–∞–≤—å—Ç–µ postCreateCommand –∏ postStartCommand
   ```

3. **–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ setup-heroes-platform.sh
   # –°–æ–∑–¥–∞–π—Ç–µ setup-mcp-servers.sh
   # –°–æ–∑–¥–∞–π—Ç–µ test-mcp-integration.sh
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Dev Container:**
   ```bash
   # –í VS Code: Ctrl+Shift+P -> "Dev Containers: Reopen in Container"
   # –ò–ª–∏ —á–µ—Ä–µ–∑ Docker Desktop
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```bash
   # –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
   bash .devcontainer/scripts/test-mcp-integration.sh
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   cat .cursor/mcp.json | jq '.mcpServers | keys'
   ```

### –ú–∏–≥—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ô –ü–û–î–•–û–î)

**üîÑ –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–∏–ø —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   # –û–±—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã (–¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
   - browsermcp, jira-mcp, linear-mcp
   
   # –ü—Ä–æ–µ–∫—Ç-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
   - heroes-mcp, n8n-mcp, telegram-mcp
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É .cursor –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
   mkdir -p .cursor
   
   # –°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π mcp.json
   touch .cursor/mcp.json
   ```

3. **–ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã:**
   ```bash
   # –ò–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é
   # –û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –æ–±—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```bash
   # –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –í–°–ï MCP —Å–µ—Ä–≤–µ—Ä—ã
   cat .cursor/mcp.json | jq '.mcpServers | keys'
   
   # –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   ls -la ~/.cursor/mcp.json || echo "–°–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)"
   ```

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–≤–∏—Å–∞–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** MCP —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∑–∞–≤–∏—Å–∞—é—Ç, –æ–∂–∏–¥–∞—è JSON-RPC –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ stdio transport.

### –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ JSON –≤ –ª–æ–≥–∞—Ö

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** credentials_wrapper.py –≤—ã–≤–æ–¥–∏—Ç —ç–º–æ–¥–∑–∏ –∏ —Ç–µ–∫—Å—Ç –≤ stdout, –∫–æ—Ç–æ—Ä—ã–π Cursor –ø—ã—Ç–∞–µ—Ç—Å—è –ø–∞—Ä—Å–∏—Ç—å –∫–∞–∫ JSON-RPC, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON.

**–û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö:**
```
[error] Client error for command Unexpected token 'P', "Please ent"... is not valid JSON
[error] Client error for command Unexpected token '‚úÖ', "‚úÖ TELEGRAM_API_ID" is not valid JSON
[error] Client error for command Unexpected token 'üöÄ', "üöÄ Startin"... is not valid JSON
```

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤** –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π MCP —Å–µ—Ä–≤–µ—Ä–∞
2. **credentials_wrapper.py –≤—ã–≤–æ–¥–∏—Ç –≤ stdout** –≤–º–µ—Å—Ç–æ stderr, —á—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç JSON-RPC –ø—Ä–æ—Ç–æ–∫–æ–ª

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

**–í–°–ï MCP —Å–µ—Ä–≤–µ—Ä—ã –î–û–õ–ñ–ù–´ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞:**

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ credentials_wrapper.py

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** credentials_wrapper.py –î–û–õ–ñ–ï–ù –≤—ã–≤–æ–¥–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏ –≤ stderr, –∞ –ù–ï –≤ stdout:

```python
import sys

def log_to_stderr(message: str):
    """–í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ stderr, –∞ –Ω–µ –≤ stdout"""
    print(message, file=sys.stderr)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
log_to_stderr("üîê Loading telegram credentials via credentials_manager...")
log_to_stderr("‚úÖ TELEGRAM_API_ID")
log_to_stderr("üöÄ Starting telegram-mcp server...")
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**
- stdout –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è JSON-RPC –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- stderr –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–æ–≤ –∏ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- Cursor –ø–∞—Ä—Å–∏—Ç stdout –∫–∞–∫ JSON-RPC –∫–æ–º–∞–Ω–¥—ã
- –≠–º–æ–¥–∑–∏ –∏ —Ç–µ–∫—Å—Ç –≤ stdout –Ω–∞—Ä—É—à–∞—é—Ç JSON-RPC –ø—Ä–æ—Ç–æ–∫–æ–ª

#### Python MCP —Å–µ—Ä–≤–µ—Ä—ã

```python
#!/usr/bin/env python3
import sys

# –ü–†–û–í–ï–†–ö–ê –ê–†–ì–£–ú–ï–ù–¢–û–í –ö–û–ú–ê–ù–î–ù–û–ô –°–¢–†–û–ö–ò –ü–ï–†–ï–î –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ï–ô
def check_command_line_args():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –≤—ã—Ö–æ–¥–∏—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ"""
    if len(sys.argv) > 1:
        arg = sys.argv[1]
        
        if arg == "--help" or arg == "-h":
            print("MCP Server v1.0.0")
            print("Usage: python server.py [OPTIONS]")
            print("")
            print("Options:")
            print("  --help, -h     Show this help message")
            print("  --version, -v  Show version information")
            print("  --test         Show registered tools and exit")
            print("  --list-tools   List all available MCP tools")
            sys.exit(0)
        
        elif arg == "--version" or arg == "-v":
            print("MCP Server v1.0.0")
            print("Protocol: MCP v1.0")
            print("Transport: stdio")
            sys.exit(0)
        
        elif arg == "--test":
            print("Registered tools: tool1, tool2, tool3")
            sys.exit(0)
        
        elif arg == "--list-tools":
            tools_list = ["tool1", "tool2", "tool3"]
            print("Available MCP Tools:")
            for i, tool in enumerate(tools_list, 1):
                print(f"  {i:2d}. {tool}")
            print(f"\nTotal: {len(tools_list)} tools")
            sys.exit(0)
        
        elif arg.startswith("--"):
            print(f"Unknown option: {arg}")
            print("Use --help for usage information")
            sys.exit(1)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –°–†–ê–ó–£
check_command_line_args()

# –î–∞–ª–µ–µ –∏–¥–µ—Ç –æ–±—ã—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞
# ...
```

#### Node.js MCP —Å–µ—Ä–≤–µ—Ä—ã

```typescript
async function main() {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –ü–ï–†–ï–î –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π MCP
  const args = process.argv.slice(2);
  
  if (args.includes('--help') || args.includes('-h')) {
    console.log('MCP Server v1.0.0');
    console.log('Usage: node server.js [OPTIONS]');
    console.log('');
    console.log('Options:');
    console.log('  --help, -h     Show this help message');
    console.log('  --version, -v  Show version information');
    console.log('  --test         Show registered tools and exit');
    console.log('  --list-tools   List all available MCP tools');
    process.exit(0);
  }
  
  if (args.includes('--version') || args.includes('-v')) {
    console.log('MCP Server v1.0.0');
    console.log('Protocol: MCP v1.0');
    console.log('Transport: stdio');
    process.exit(0);
  }
  
  if (args.includes('--test')) {
    console.log('Registered tools: tool1, tool2, tool3');
    process.exit(0);
  }
  
  if (args.includes('--list-tools')) {
    const tools_list = ['tool1', 'tool2', 'tool3'];
    console.log('Available MCP Tools:');
    for (let i = 0; i < tools_list.length; i++) {
      console.log(`  ${(i + 1).toString().padStart(2, ' ')}. ${tools_list[i]}`);
    }
    console.log(`\nTotal: ${tools_list.length} tools`);
    process.exit(0);
  }
  
  if (args.some(arg => arg.startsWith('--'))) {
    console.error(`Unknown option: ${args.find(arg => arg.startsWith('--'))}`);
    console.error('Use --help for usage information');
    process.exit(1);
  }

  // –î–∞–ª–µ–µ –∏–¥–µ—Ç –æ–±—ã—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞
  // ...
}
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

#### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å CLI –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏

```bash
# Heroes MCP Server
python3 heroes_platform/heroes_mcp/src/heroes_mcp_server.py --help
python3 heroes_platform/heroes_mcp/src/heroes_mcp_server.py --version
python3 heroes_platform/heroes_mcp/src/heroes_mcp_server.py --list-tools
python3 heroes_platform/heroes_mcp/src/heroes_mcp_server.py --test

# N8N MCP Server
node heroes_platform/n8n-mcp/dist/mcp/index.js --help
node heroes_platform/n8n-mcp/dist/mcp/index.js --version
node heroes_platform/n8n-mcp/dist/mcp/index.js --list-tools
node heroes_platform/n8n-mcp/dist/mcp/index.js --test
```

#### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —á–µ—Ä–µ–∑ MCP CLI

```bash
# –î–ª—è Cursor
mcp run heroes_platform/heroes_mcp/src/heroes_mcp_server.py
mcp run heroes_platform/n8n-mcp/dist/mcp/index.js
```

#### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (–∑–∞–≤–∏—Å–Ω–µ—Ç)

```bash
# –ù–ï –î–ï–õ–ê–ô–¢–ï –¢–ê–ö - —Å–µ—Ä–≤–µ—Ä –∑–∞–≤–∏—Å–Ω–µ—Ç
python3 heroes_platform/heroes_mcp/src/heroes_mcp_server.py
node heroes_platform/n8n-mcp/dist/mcp/index.js
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
python3 scripts/test_mcp_servers.py
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

**üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Cursor:**

1. **–ù–∞–π—Ç–∏ –ª–æ–≥–∏ Cursor:**
   ```bash
   # macOS
   ls -la ~/Library/Application\ Support/Cursor/logs/
   
   # Windows
   dir %APPDATA%\Cursor\logs\
   
   # Linux
   ls -la ~/.config/Cursor/logs/
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:**
   ```bash
   # –ù–∞–π—Ç–∏ –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞
   find ~/Library/Application\ Support/Cursor/logs/ -name "*telegram-mcp*" -o -name "*n8n-mcp*"
   
   # –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
   tail -50 ~/Library/Application\ Support/Cursor/logs/*/window*/exthost/*/MCP*.log
   ```

3. **–ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ JSON-RPC:**
   ```bash
   # –ù–∞–π—Ç–∏ –æ—à–∏–±–∫–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ JSON
   grep -r "Unexpected token" ~/Library/Application\ Support/Cursor/logs/
   
   # –ù–∞–π—Ç–∏ –æ—à–∏–±–∫–∏ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
   grep -r "Client error for command" ~/Library/Application\ Support/Cursor/logs/
   ```

**üìä –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö:**

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| `Unexpected token 'P', "Please ent"...` | credentials_wrapper.py –≤—ã–≤–æ–¥–∏—Ç –≤ stdout | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤ stderr |
| `Unexpected token '‚úÖ', "‚úÖ TELEGRAM_API_ID"` | –≠–º–æ–¥–∑–∏ –≤ stdout | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å stderr –¥–ª—è –ª–æ–≥–æ–≤ |
| `Unexpected token 'üöÄ', "üöÄ Startin"...` | –¢–µ–∫—Å—Ç –≤ stdout | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤ stderr |
| `Client error for command` | –ù–∞—Ä—É—à–µ–Ω–∏–µ JSON-RPC –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ | –ò—Å–ø—Ä–∞–≤–∏—Ç—å credentials_wrapper.py |

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ CLI –∫–æ–º–∞–Ω–¥—ã

–í—Å–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –î–û–õ–ñ–ù–´ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|---------|
| `--help`, `-h` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É | `python3 server.py --help` |
| `--version`, `-v` | –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é | `python3 server.py --version` |
| `--test` | –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã | `python3 server.py --test` |
| `--list-tools` | –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ | `python3 server.py --list-tools` |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### 1. Input Validation

- **Sanitization**: –û—á–∏—Å—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Type Checking**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **Range Validation**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∑–Ω–∞—á–µ–Ω–∏–π
- **Format Validation**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### 2. Error Handling

- **Graceful Degradation**: –ü–ª–∞–≤–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **Error Logging**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- **User Feedback**: –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **Recovery Mechanisms**: –ú–µ—Ö–∞–Ω–∏–∑–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 3. Security Considerations

- **Authentication**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Authorization**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **Data Encryption**: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Audit Logging**: –ê—É–¥–∏—Ç –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üîê Credential Management Standard

### Cross-Platform Credential Access

#### Mac Keychain Integration

```python
@mcp.tool()
async def get_credential_from_keychain(credential_name: str, profile: str = "ik") -> dict:
    """Get credential from Mac Keychain with profile support"""
    try:
        if profile == "ik":
            # For ik_tg keys, use label (-l) instead of service (-s)
            command = f'security find-generic-password -l "{credential_name}" -w'
        elif profile == "lisa":
            # For lisa_tg keys, use service (-s) with lisa account
            command = f'security find-generic-password -s "{credential_name}" -a "lisa" -w'
        else:
            # Default to ilyakrasinsky account
            command = f'security find-generic-password -s "{credential_name}" -a "ilyakrasinsky" -w'
        
        result = subprocess.run(command, shell=True, capture_output=True, text=True, check=True)
        value = result.stdout.strip()
        
        # Decode hex-encoded data from Keychain (for binary data like JSON)
        if value:
            try:
                import subprocess as sp
                decode_result = sp.run(
                    f'echo "{value}" | xxd -r -p',
                    shell=True, capture_output=True, text=True, check=True
                )
                decoded_value = decode_result.stdout.strip()
                
                # If decoded value is valid JSON, use it
                try:
                    json.loads(decoded_value)
                    value = decoded_value
                except json.JSONDecodeError:
                    # If not JSON, use original value (for plain text credentials)
                    pass
            except Exception:
                # If hex decode fails, use original value
                pass
        
        return {"success": True, "value": value, "source": "keychain"}
    except subprocess.CalledProcessError:
        return {"success": False, "error": "Credential not found in keychain"}
```

#### Windows Credential Manager Integration

```python
@mcp.tool()
async def get_credential_from_windows(credential_name: str) -> dict:
    """Get credential from Windows Credential Manager"""
    try:
        import win32cred
        credential = win32cred.CredRead(credential_name, win32cred.CRED_TYPE_GENERIC)
        return {"success": True, "value": credential['CredentialBlob'].decode('utf-8'), "source": "windows_credential_manager"}
    except Exception as e:
        return {"success": False, "error": str(e)}

@mcp.tool()
async def get_credential_from_windows_advanced(credential_name: str, credential_type: str = "generic") -> dict:
    """Get credential from Windows Credential Manager with advanced options"""
    try:
        import win32cred
        import win32con
        
        if credential_type == "generic":
            credential = win32cred.CredRead(credential_name, win32cred.CRED_TYPE_GENERIC)
        elif credential_type == "domain":
            credential = win32cred.CredRead(credential_name, win32cred.CRED_TYPE_DOMAIN_PASSWORD)
        else:
            return {"success": False, "error": f"Unsupported credential type: {credential_type}"}
        
        return {
            "success": True, 
            "value": credential['CredentialBlob'].decode('utf-8'), 
            "source": "windows_credential_manager",
            "type": credential_type,
            "username": credential.get('UserName', ''),
            "target": credential.get('TargetName', '')
        }
    except Exception as e:
        return {"success": False, "error": str(e)}
```

#### Cross-Platform Credential Manager

```python
import platform
import subprocess
import json
from typing import Dict, Optional

class CrossPlatformCredentialManager:
    """Unified credential manager for Mac and Windows"""
    
    def __init__(self):
        self.platform = platform.system().lower()
        self._cache: Dict[str, dict] = {}
    
    async def get_credential(self, credential_name: str, profile: str = "ik") -> dict:
        """Get credential with platform-specific implementation"""
        # Check cache first
        cache_key = f"{credential_name}:{profile}"
        if cache_key in self._cache:
            return self._cache[cache_key]
        
        if self.platform == "darwin":
            result = await self._get_from_mac_keychain(credential_name, profile)
        elif self.platform == "windows":
            result = await self._get_from_windows_credential_manager(credential_name)
        else:
            result = await self._get_from_env(credential_name)
        
        # Cache result
        self._cache[cache_key] = result
        return result
    
    async def _get_from_mac_keychain(self, credential_name: str, profile: str) -> dict:
        """Get credential from Mac Keychain"""
        try:
            if profile == "ik":
                command = f'security find-generic-password -l "{credential_name}" -w'
            elif profile == "lisa":
                command = f'security find-generic-password -s "{credential_name}" -a "lisa" -w'
            else:
                command = f'security find-generic-password -s "{credential_name}" -a "ilyakrasinsky" -w'
            
            result = subprocess.run(command, shell=True, capture_output=True, text=True, check=True)
            value = result.stdout.strip()
            
            # Handle hex-encoded data
            if value:
                try:
                    decode_result = subprocess.run(
                        f'echo "{value}" | xxd -r -p',
                        shell=True, capture_output=True, text=True, check=True
                    )
                    decoded_value = decode_result.stdout.strip()
                    try:
                        json.loads(decoded_value)
                        value = decoded_value
                    except json.JSONDecodeError:
                        pass
                except Exception:
                    pass
            
            return {"success": True, "value": value, "source": "mac_keychain"}
        except subprocess.CalledProcessError:
            return {"success": False, "error": "Credential not found in keychain"}
    
    async def _get_from_windows_credential_manager(self, credential_name: str) -> dict:
        """Get credential from Windows Credential Manager"""
        try:
            import win32cred
            credential = win32cred.CredRead(credential_name, win32cred.CRED_TYPE_GENERIC)
            return {"success": True, "value": credential['CredentialBlob'].decode('utf-8'), "source": "windows_credential_manager"}
        except Exception as e:
            return {"success": False, "error": str(e)}
    
    async def _get_from_env(self, credential_name: str) -> dict:
        """Get credential from environment variables"""
        import os
        env_key = credential_name.upper()
        value = os.getenv(env_key)
        
        if value:
            return {"success": True, "value": value, "source": "environment"}
        else:
            return {"success": False, "error": f"Environment variable {env_key} not found"}
```

### User Profile Standards

#### Profile Naming Convention
- `ik` - ilyakrasinsky (–æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ik_tg_*` –∫–ª—é—á–∏ —Å `-l` —Ñ–ª–∞–≥–æ–º)
- `lisa` - lisa (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `lisa_tg_*` –∫–ª—é—á–∏ —Å `-s` —Ñ–ª–∞–≥–æ–º –∏ `-a lisa`)
- `service` - —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (rick@service –¥–ª—è Google Service Account)

#### Profile Detection Logic
```python
def detect_current_profile() -> str:
    """Detect current user profile based on environment and available keys"""
    import os
    
    # Check environment variable first
    profile = os.getenv("HEROES_PROFILE")
    if profile:
        return profile
    
    # Check current user
    current_user = os.getenv("USER", "").lower()
    if current_user == "ilyakrasinsky":
        return "ik"
    elif current_user == "lisa":
        return "lisa"
    
    # Fallback: check which keys are available
    try:
        # Check if ik_tg keys exist
        result = subprocess.run(
            'security find-generic-password -l "ik_tg_api_id" -w',
            shell=True, capture_output=True, text=True
        )
        if result.returncode == 0:
            return "ik"
        
        # Check if lisa_tg keys exist
        result = subprocess.run(
            'security find-generic-password -s "lisa_tg_api_key" -a "lisa" -w',
            shell=True, capture_output=True, text=True
        )
        if result.returncode == 0:
            return "lisa"
    except Exception:
        pass
    
    # Default fallback
    return "ik"
```

### Fallback Chain Standard

1. **Primary**: Platform-specific credential manager (Mac Keychain / Windows Credential Manager)
2. **Secondary**: Environment variables
3. **Tertiary**: GitHub Secrets (in CI/CD environments)
4. **Fallback**: Local file (development only)

```python
async def get_credential_with_fallback(credential_name: str, profile: str = "ik") -> dict:
    """Get credential with fallback chain"""
    manager = CrossPlatformCredentialManager()
    
    # Try primary source
    result = await manager.get_credential(credential_name, profile)
    if result["success"]:
        return result
    
    # Try environment variables
    import os
    env_key = credential_name.upper()
    value = os.getenv(env_key)
    if value:
        return {"success": True, "value": value, "source": "environment"}
    
    # Try GitHub Secrets (in CI/CD)
    if os.getenv("GITHUB_ACTIONS"):
        value = os.getenv(env_key)
        if value:
            return {"success": True, "value": value, "source": "github_secrets"}
    
    # Try local file (development)
    from pathlib import Path
    file_path = Path.home() / ".heroes" / f"{credential_name}.txt"
    if file_path.exists():
        try:
            value = file_path.read_text().strip()
            if value:
                return {"success": True, "value": value, "source": "file"}
        except Exception:
            pass
    
    return {"success": False, "error": f"Credential {credential_name} not found in any source"}
```

### FastMCP Credential Integration

#### Credential Context in FastMCP Tools

```python
@mcp.tool()
async def secure_api_call(api_name: str, endpoint: str, data: dict) -> dict:
    """Make secure API call using credentials from credential manager"""
    try:
        # Get credentials securely
        credential_result = await get_credential_with_fallback(api_name)
        if not credential_result["success"]:
            return {"error": f"Credential not found: {credential_result['error']}"}
        
        # Make API call with credentials
        headers = {"Authorization": f"Bearer {credential_result['value']}"}
        # ... API call logic
        
        return {"status": "success", "source": credential_result["source"]}
    except Exception as e:
        return {"error": str(e)}
```

### Credential Validation Standards

```python
from dataclasses import dataclass
from typing import Optional, List
import json
import re

@dataclass
class CredentialValidation:
    min_length: int = 10
    max_length: int = 1000
    required_prefix: Optional[str] = None
    pattern: Optional[str] = None
    is_json: bool = False
    required_fields: Optional[List[str]] = None

def validate_credential(value: str, validation: CredentialValidation) -> bool:
    """Validate credential according to rules"""
    if not value:
        return False
    
    # Length validation
    if len(value) < validation.min_length or len(value) > validation.max_length:
        return False
    
    # Prefix validation
    if validation.required_prefix and not value.startswith(validation.required_prefix):
        return False
    
    # Pattern validation
    if validation.pattern and not re.match(validation.pattern, value):
        return False
    
    # JSON validation
    if validation.is_json:
        try:
            json_data = json.loads(value)
            if validation.required_fields:
                for field in validation.required_fields:
                    if field not in json_data:
                        return False
        except json.JSONDecodeError:
            return False
    
    return True
```

### Testing Credential Management

#### Unit Tests for Credential Manager

```python
import pytest
from unittest.mock import patch, MagicMock

@pytest.mark.asyncio
async def test_cross_platform_credential_manager():
    """Test credential manager across platforms"""
    manager = CrossPlatformCredentialManager()
    
    # Test credential retrieval
    with patch('subprocess.run') as mock_run:
        mock_run.return_value.returncode = 0
        mock_run.return_value.stdout = "test_credential_value"
        
        result = await manager.get_credential("test_credential", "ik")
        assert result["success"] is True
        assert result["value"] == "test_credential_value"
        assert result["source"] == "mac_keychain"
    
    # Test fallback chain
    with patch('subprocess.run') as mock_run:
        mock_run.return_value.returncode = 1  # Credential not found
        
        result = await manager.get_credential("nonexistent_credential", "ik")
        assert result["success"] is False
        assert "not found" in result["error"]

@pytest.mark.asyncio
async def test_profile_detection():
    """Test user profile detection logic"""
    with patch.dict('os.environ', {'HEROES_PROFILE': 'lisa'}):
        profile = detect_current_profile()
        assert profile == "lisa"
    
    with patch.dict('os.environ', {'USER': 'ilyakrasinsky'}):
        profile = detect_current_profile()
        assert profile == "ik"

@pytest.mark.asyncio
async def test_credential_validation():
    """Test credential validation"""
    validation = CredentialValidation(
        min_length=10,
        max_length=100,
        required_prefix="sk-",
        is_json=False
    )
    
    # Valid credential
    assert validate_credential("sk-1234567890", validation) is True
    
    # Invalid credential (wrong prefix)
    assert validate_credential("pk-1234567890", validation) is False
    
    # Invalid credential (too short)
    assert validate_credential("sk-123", validation) is False
```

#### Integration Tests with MCP Server

```python
@pytest.mark.asyncio
async def test_mcp_credential_integration():
    """Test MCP server with credential manager"""
    async with create_connected_server_and_client_session(mcp._mcp_server) as client:
        # Test secure API call
        result = await client.call_tool("secure_api_call", {
            "api_name": "telegram_api_id",
            "endpoint": "/test",
            "data": {}
        })
        
        # Should not have credential errors
        assert "error" not in result.structuredContent
        assert result.structuredContent["status"] == "success"
```

### Security Best Practices

#### Credential Storage Security

1. **Never log credential values** - only log success/failure
2. **Use secure transport** - HTTPS for all API calls
3. **Validate credentials** - check format and length
4. **Cache securely** - use memory cache, not disk
5. **Clear sensitive data** - zero out variables after use

```python
import logging
import gc

async def secure_credential_usage(credential_name: str) -> dict:
    """Example of secure credential usage"""
    logger = logging.getLogger(__name__)
    
    # Get credential
    result = await get_credential_with_fallback(credential_name)
    if not result["success"]:
        logger.error(f"Failed to get credential: {credential_name}")
        return {"error": "Credential not found"}
    
    credential_value = result["value"]
    
    try:
        # Use credential (never log the value)
        logger.info(f"Using credential from source: {result['source']}")
        
        # Make API call
        headers = {"Authorization": f"Bearer {credential_value}"}
        # ... API logic
        
        return {"status": "success"}
    
    finally:
        # Clear sensitive data
        credential_value = None
        gc.collect()  # Force garbage collection
```

#### Linux Support

```python
async def _get_from_linux_keyring(self, credential_name: str) -> dict:
    """Get credential from Linux keyring (using keyring library)"""
    try:
        import keyring
        value = keyring.get_password("heroes-mcp", credential_name)
        
        if value:
            return {"success": True, "value": value, "source": "linux_keyring"}
        else:
            return {"success": False, "error": "Credential not found in keyring"}
    except ImportError:
        return {"success": False, "error": "keyring library not installed"}
    except Exception as e:
        return {"success": False, "error": str(e)}
```

### Setup and Configuration

#### Mac Keychain Setup

```bash
# Add Telegram credentials for ik profile
security add-generic-password -l "ik_tg_api_id" -w "YOUR_API_ID" -U
security add-generic-password -l "ik_tg_api_hash" -w "YOUR_API_HASH" -U
security add-generic-password -l "ik_tg_session" -w "YOUR_SESSION_STRING" -U

# Add Telegram credentials for lisa profile
security add-generic-password -s "lisa_tg_api_key" -a "lisa" -w "YOUR_API_ID" -U
security add-generic-password -s "lisa_tg_app_hash" -a "lisa" -w "YOUR_API_HASH" -U
security add-generic-password -s "lisa_tg_session" -a "lisa" -w "YOUR_SESSION_STRING" -U

# Add Google Service Account JSON
security add-generic-password -s "google-service-account-json" -a "rick@service" -w "$(cat service-account.json | xxd -p -c 1000000)" -U
```

#### Windows Credential Manager Setup

```powershell
# Add credentials using PowerShell
$credential = Get-Credential -Message "Enter credential for heroes-mcp"
$credential.Password | ConvertFrom-SecureString | Set-Content "credential.txt"

# Or use cmdkey
cmdkey /generic:heroes-mcp /user:ilyakrasinsky /pass:YOUR_PASSWORD
```

#### Linux Keyring Setup

```bash
# Install keyring library
pip install keyring

# Add credentials
python -c "import keyring; keyring.set_password('heroes-mcp', 'telegram_api_id', 'YOUR_API_ID')"
```

---

## üåê Cross-Platform Development Setup

### macOS Setup
```bash
# Install Python via Homebrew
brew install python@3.11

# Create virtual environment
python3 -m venv .venv
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Verify Python paths
which python3  # Should show /usr/local/bin/python3
ls -la .venv/bin/python*  # Should show symlinks
```

### Windows Setup
```powershell
# Install Python via Microsoft Store or python.org
# Create virtual environment
python -m venv .venv
.venv\Scripts\Activate.ps1

# Install dependencies
pip install -r requirements.txt

# Verify Python paths
where python  # Should show Python installation path
dir .venv\Scripts\python*  # Should show Python executables
```

### Linux Setup
```bash
# Install Python
sudo apt update
sudo apt install python3.11 python3.11-venv

# Create virtual environment
python3.11 -m venv .venv
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Verify Python paths
which python3  # Should show /usr/bin/python3
ls -la .venv/bin/python*  # Should show symlinks
```

### Cross-Platform MCP Configuration

#### macOS Configuration
```json
{
  "mcpServers": {
    "heroes-mcp": {
      "command": "/Users/username/project/.venv/bin/python",
      "args": ["/Users/username/project/heroes_platform/heroes_mcp/src/heroes_mcp_server.py"],
      "env": {
        "PYTHONPATH": "/Users/username/project/heroes_platform"
      }
    }
  }
}
```

#### Windows Configuration
```json
{
  "mcpServers": {
    "heroes-mcp": {
      "command": "C:\\Users\\username\\project\\.venv\\Scripts\\python.exe",
      "args": ["C:\\Users\\username\\project\\heroes_platform\\heroes_mcp\\src\\heroes_mcp_server.py"],
      "env": {
        "PYTHONPATH": "C:\\Users\\username\\project\\heroes_platform"
      }
    }
  }
}
```

#### Linux Configuration
```json
{
  "mcpServers": {
    "heroes-mcp": {
      "command": "/home/username/project/.venv/bin/python",
      "args": ["/home/username/project/heroes_platform/heroes_mcp/src/heroes_mcp_server.py"],
      "env": {
        "PYTHONPATH": "/home/username/project/heroes_platform"
      }
    }
  }
}
```

### Platform-Specific Dependencies

#### macOS Dependencies
```bash
# Install system dependencies
brew install git nodejs

# Install Python packages
pip install mcp fastmcp pydantic aiohttp
```

#### Windows Dependencies
```powershell
# Install system dependencies via Chocolatey
choco install git nodejs

# Install Python packages
pip install mcp fastmcp pydantic aiohttp pywin32
```

#### Linux Dependencies
```bash
# Install system dependencies
sudo apt install git nodejs npm python3-pip

# Install Python packages
pip install mcp fastmcp pydantic aiohttp
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è MCP –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤

### ‚úÖ Dev Container Setup (–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–û–î–•–û–î)

- [ ] **Dev Container –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞:**
  - [ ] `.devcontainer/devcontainer.json` —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ features
  - [ ] `.devcontainer/Dockerfile` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Python 3.11 –∏ Node.js 20
  - [ ] `.devcontainer/scripts/setup-mcp-servers.sh` —Å–æ–∑–¥–∞–Ω
  - [ ] `.devcontainer/scripts/test-mcp-integration.sh` —Å–æ–∑–¥–∞–Ω
  - [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (PYTHONPATH, NODE_PATH, MCP_MODE)

- [ ] **MCP —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ Dev Container:**
  - [ ] –í—Å–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
  - [ ] CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - [ ] JSON-RPC –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–æ–±–ª—é–¥–µ–Ω
  - [ ] credentials_wrapper.py –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –≤ stderr
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

### ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

- [ ] **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É:**
  - [ ] –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π workflow –≤ –ø–∞–ø–∫–µ `workflows/`
  - [ ] MCP —Å–µ—Ä–≤–µ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ workflow
  - [ ] Workflow —è–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å–æ–º —Å –º–µ—Ç–æ–¥–æ–º `execute()` –∏–ª–∏ `async execute()`
  - [ ] –ò–º–ø–æ—Ä—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–æ–¥—É–ª–µ–π)
  - [ ] –ù–ï –°–û–ó–î–ê–í–ê–¢–¨ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –ø—Ä—è–º–æ –≤ mcp_server.py!

- [ ] **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É:**
  - [ ] MCP Tools = —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
  - [ ] MCP Resources = –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º
  - [ ] MCP Prompts = –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —à–∞–±–ª–æ–Ω–æ–≤
  - [ ] –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ = –≤–∞–ª–∏–¥–∞—Ü–∏—è, —É—Ç–∏–ª–∏—Ç—ã, –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
  - [ ] –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å MCP –ø—Ä–∏–º–∏—Ç–∏–≤—ã –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏

- [ ] **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
  - [ ] –§—É–Ω–∫—Ü–∏—è –≤ mcp_server.py –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ async
  - [ ] Workflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç aiohttp –≤–º–µ—Å—Ç–æ requests –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
  - [ ] –í—Å–µ I/O –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
  - [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è await –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

- [ ] **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª—É:**
  - [ ] –§—É–Ω–∫—Ü–∏—è –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∞ @mcp.tool()
  - [ ] –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É JSON –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –ø–æ–ª–µ–º "error"
  - [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

- [ ] **Credential Management:**
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CrossPlatformCredentialManager –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–∫—Ä–µ—Ç–∞–º
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω fallback chain (keychain ‚Üí env ‚Üí github_secrets ‚Üí file)
  - [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ik/lisa/service)
  - [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è credentials –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
  - [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ credentials –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ credential access

### ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω JTBD —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–Ω–∞–ª–æ–≥–∏
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—Ö–æ–¥–Ω—ã–µ –∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å Pydantic –º–æ–¥–µ–ª—è–º–∏
- [ ] –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] –í—ã–±—Ä–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è FastMCP —Å–µ—Ä–≤–µ—Ä–∞

### ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω FastMCP –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ MCP
- [ ] –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@mcp.tool()`
- [ ] –†–µ—Å—É—Ä—Å—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@mcp.resource()`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ `ctx: Context`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ —á–µ—Ä–µ–∑ `ctx.session.send_progress_notification()`
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `ctx.session.send_log_message()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã reflection checkpoints —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏–º–∏—Ç–∞–º: Public Methods ‚â§ 25 —Å—Ç—Ä–æ–∫, Private Methods ‚â§ 20 —Å—Ç—Ä–æ–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è FastMCP —Å–µ—Ä–≤–µ—Ä–∞

### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] **Unit —Ç–µ—Å—Ç—ã –¥–ª—è workflow:**
  - [ ] –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã workflow –∫–ª–∞—Å—Å–∞
  - [ ] –ú–æ–∫–∏—Ä—É—é—Ç—Å—è –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ —Ç.–¥.)
  - [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - [ ] –¢–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ –æ—à–∏–±–∫–∏

- [ ] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã MCP:**
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª
  - [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤
  - [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**
  - [ ] –í—ã–ø–æ–ª–Ω–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ MCP —Å–µ—Ä–≤–µ—Ä
  - [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–Ω–µ —Ç–æ–ª—å–∫–æ –º–æ–∫–∞–º–∏)
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤ production-like –æ–∫—Ä—É–∂–µ–Ω–∏–∏
  - [ ] –í—ã–ø–æ–ª–Ω–µ–Ω cross-check —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã unit —Ç–µ—Å—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `create_connected_server_and_client_session`
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ FastMCP –ø—Ä–æ—Ç–æ–∫–æ–ª—É
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º Python SDK
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏–º–∏—Ç–∏–≤—ã (Tools, Resources)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ OAuth –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è Pydantic –º–æ–¥–µ–ª–µ–π

### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- [ ] –ö–æ–º–∞–Ω–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ FastMCP registry
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω code review
- [ ] –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ production-like —Å—Ä–µ–¥–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞–º–∏ (stdio, SSE, HTTP)

### ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ reflection checkpoints
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Å–µ—Ä–≤–µ—Ä–∞

---

## üîç Protocol Challenge: –ê–Ω–∞–ª–∏–∑ MCP –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤

### ‚ùå **–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:**

1. **–ü—É—Ç–∞–Ω–∏—Ü–∞ –≤ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ç–µ—Ä–º–∏–Ω "MCP –∫–æ–º–∞–Ω–¥—ã" - –ù–ï –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Ä–º–∏–Ω
   - –°–º–µ—à–∏–≤–∞–ª–∏—Å—å –ø–æ–Ω—è—Ç–∏—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ –∏ –∫–æ–º–∞–Ω–¥

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Prompts:**
   - –í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ –ù–ï –±—ã–ª–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `@mcp.prompt()` - —Ç—Ä–µ—Ç—å–µ–≥–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–∏—Ç–∏–≤–∞
   - –ù–µ–ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ MCP

3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - –ù–µ –±—ã–ª–æ —á–µ—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–µ–∂–¥—É Tools, Resources –∏ Prompts
   - –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ JSON-RPC –º–µ—Ç–æ–¥—ã

### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏:**

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è:**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã: Tools, Resources, Prompts
   - –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

2. **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ 3 –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–∞ MCP
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ JSON-RPC –º–µ—Ç–æ–¥—ã
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Prompts

3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - Tools –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - Resources –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
   - Prompts –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

### üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç Protocol Challenge:**

**–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.95** - –°—Ç–∞–Ω–¥–∞—Ä—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ MCP –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## üöÄ Dev Container Benefits –¥–ª—è MCP Development

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Dev Container –ø–æ–¥—Ö–æ–¥–∞

**üéØ –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å:**
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ macOS, Windows, Linux
- **–ï–¥–∏–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ Python, Node.js, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ò–∑–æ–ª—è—Ü–∏—è** - –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏
- **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å** - –ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

**‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**
- **5 –º–∏–Ω—É—Ç –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏** - –æ—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—Å–µ
- **–ì–æ—Ç–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –≤—Å–µ –ø–∞–∫–µ—Ç—ã –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –∫–æ—Ä–æ–±–∫–∏** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã

**üîß –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
- **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø—É—Ç—è–º–∏** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è –≤—Å–µ—Ö –û–°
- **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –≤–µ—Ä—Å–∏—è–º–∏** - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Python/Node.js
- **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏** - –≤—Å–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å credentials** - –µ–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Dev Container | –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |
|----------|---------------|-------------------|
| **–í—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** | 5 –º–∏–Ω—É—Ç | 30-60 –º–∏–Ω—É—Ç |
| **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** | ‚úÖ 100% | ‚ùå –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –û–° |
| **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å** | ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω–æ | ‚ùå –ú–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è |
| **–ò–∑–æ–ª—è—Ü–∏—è** | ‚úÖ –ü–æ–ª–Ω–∞—è | ‚ùå –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏—Å—Ç–µ–º—ã |
| **–û—Ç–ª–∞–¥–∫–∞** | ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ | ‚ùå –†–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã |
| **CI/CD** | ‚úÖ –ì–æ—Ç–æ–≤–æ | ‚ùå –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –≤–Ω–µ—à–Ω–∏–º–∏ MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –í–Ω–µ—à–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É

**–°–∏–º–ø—Ç–æ–º—ã**:
- JSON-RPC –æ—à–∏–±–∫–∏ "Unexpected token"
- –°–µ—Ä–≤–µ—Ä—ã –∑–∞–≤–∏—Å–∞—é—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã `--help`, `--test`, `--list-tools`
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π transport (SSE –≤–º–µ—Å—Ç–æ stdio)

### Root Cause Analysis (RCA)

**–ê–Ω–∞–ª–∏–∑ "5 –ø–æ—á–µ–º—É"**:
1. **–ü–æ—á–µ–º—É #1**: –í–Ω–µ—à–Ω–∏–π MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤–∏–¥–µ–Ω –≤ Cursor tools? ‚Üí JSON-RPC –æ—à–∏–±–∫–∏
2. **–ü–æ—á–µ–º—É #2**: –ü–æ—á–µ–º—É JSON-RPC –æ—à–∏–±–∫–∏? ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π transport
3. **–ü–æ—á–µ–º—É #3**: –ü–æ—á–µ–º—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π transport? ‚Üí –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç MCP Workflow —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
4. **–ü–æ—á–µ–º—É #4**: –ü–æ—á–µ–º—É –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É? ‚Üí –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã
5. **–ü–æ—á–µ–º—É #5**: –ü–æ—á–µ–º—É –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã? ‚Üí **–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê**: –í–Ω–µ—à–Ω–∏–π npm –ø–∞–∫–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞

### –†–µ—à–µ–Ω–∏–µ: Wrapper Pattern

**–ü—Ä–∏–Ω—Ü–∏–ø**: –°–æ–∑–¥–∞–Ω–∏–µ wrapper –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è MCP Workflow —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É

#### –ü—Ä–∏–º–µ—Ä: figma-mcp wrapper

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ wrapper**:
```
heroes_platform/
‚îú‚îÄ‚îÄ figma-mcp-wrapper/
‚îÇ   ‚îî‚îÄ‚îÄ figma_mcp_wrapper.py
‚îî‚îÄ‚îÄ shared/
    ‚îî‚îÄ‚îÄ credentials_manager.py
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã wrapper**:

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤**:
```python
def check_command_line_args():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –≤—ã—Ö–æ–¥–∏—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ"""
    if len(sys.argv) > 1:
        arg = sys.argv[1]
        
        if arg == "--help" or arg == "-h":
            print("Figma MCP Wrapper v1.0.0")
            print("Usage: python figma_mcp_wrapper.py [OPTIONS]")
            print("Options:")
            print("  --help, -h     Show this help message")
            print("  --version, -v  Show version information")
            print("  --test         Show registered tools and exit")
            print("  --list-tools   List all available MCP tools")
            sys.exit(0)
        
        elif arg == "--test":
            print("Registered tools: figma_get_file, figma_get_node, figma_list_files, figma_search")
            sys.exit(0)
        
        elif arg == "--list-tools":
            tools_list = [
                "figma_get_file", "figma_get_node", "figma_list_files", 
                "figma_search", "figma_get_components", "figma_get_styles", "figma_export_node"
            ]
            print("Available Figma MCP Tools:")
            for i, tool in enumerate(tools_list, 1):
                print(f"  {i:2d}. {tool}")
            print(f"\nTotal: {len(tools_list)} tools")
            sys.exit(0)
```

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å credentials_manager**:
```python
def get_figma_token():
    """–ü–æ–ª—É—á–∞–µ—Ç Figma —Ç–æ–∫–µ–Ω –∏–∑ credentials_manager –∏–ª–∏ keychain"""
    # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ credentials_manager
    try:
        from shared.credentials_manager import credentials_manager
        result = credentials_manager.get_credential("figma_token")
        if result.success:
            return result.value
    except Exception:
        pass
    
    # Fallback to direct keychain access
    try:
        result = subprocess.run([
            "security", "find-generic-password", 
            "-s", "figma_mcp", 
            "-a", "figma_token", 
            "-w"
        ], capture_output=True, text=True, check=True)
        return result.stdout.strip()
    except subprocess.CalledProcessError:
        pass
    
    # Final fallback to environment variable
    return os.getenv("FIGMA_TOKEN")
```

3. **–ó–∞–ø—É—Å–∫ –≤–Ω–µ—à–Ω–µ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞**:
```python
def run_figma_mcp():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç figma-mcp —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏"""
    token = get_figma_token()
    if not token:
        print("Error: Figma token not found", file=sys.stderr)
        sys.exit(1)
    
    # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    env = os.environ.copy()
    env["FIGMA_TOKEN"] = token
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º figma-mcp —á–µ—Ä–µ–∑ npx
    npx_path = Path(__file__).parent.parent / "node_modules" / ".bin" / "npx"
    cmd = [str(npx_path), "-y", "figma-mcp"]
    
    try:
        process = subprocess.Popen(
            cmd,
            env=env,
            stdin=subprocess.PIPE,
            stdout=subprocess.PIPE,
            stderr=subprocess.PIPE,
            text=True
        )
        
        # –ü–µ—Ä–µ–¥–∞–µ–º stdin/stdout –¥–ª—è JSON-RPC
        import shutil
        try:
            shutil.copyfileobj(sys.stdin, process.stdin)
            shutil.copyfileobj(process.stdout, sys.stdout)
        except (BrokenPipeError, AttributeError):
            pass
        
        process.wait()
        
    except Exception as e:
        print(f"Error running figma-mcp: {e}", file=sys.stderr)
        sys.exit(1)
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP**:
```json
{
  "mcpServers": {
    "figma-mcp": {
      "command": "/path/to/.venv/bin/python",
      "args": ["/path/to/figma-mcp-wrapper/figma_mcp_wrapper.py"],
      "cwd": "/path/to/heroes_platform",
      "env": {
        "PYTHONPATH": "/path/to/heroes_platform"
      }
    }
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ wrapper –ø–æ–¥—Ö–æ–¥–∞**:
- ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ MCP Workflow —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å credentials_manager**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ **Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã**: keychain ‚Üí environment variables
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ graceful degradation
- ‚úÖ **–ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ macOS, Windows, Linux
- ‚úÖ **Dev Container —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ .devcontainer –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ß–µ–∫–ª–∏—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è wrapper

- [ ] **CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `--help`, `--test`, `--list-tools`
- [ ] **Credentials management**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å credentials_manager
- [ ] **Error handling**: Graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] **Logging**: –í—ã–≤–æ–¥ –ª–æ–≥–æ–≤ –≤ stderr
- [ ] **Transport**: stdio –¥–ª—è JSON-RPC
- [ ] **Testing**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- [ ] **Documentation**: JTBD –∏ TDD –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- **Major**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Dev Container)
- **Minor**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏–ª–∏ –ø—Ä–∞–∫—Ç–∏–∫
- **Patch**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ —É–ª—É—á—à–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. **–ê–Ω–∞–ª–∏–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
2. **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**: –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
3. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –í–Ω–µ—Å–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
6. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

---

## üìö –°—Å—ã–ª–∫–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

- [Task Master Standard](abstract://standard:task_master_standard) - –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏
- [Registry Standard](abstract://standard:registry_standard) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

### –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

- [TDD-doc Standard](abstract://standard:tdd_doc_standard) - –°—Ç–∞–Ω–¥–∞—Ä—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [Protocol Challenge](abstract://standard:protocol_challenge) - –ü—Ä–æ—Ç–æ–∫–æ–ª –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [FastMCP Architecture](https://modelcontextprotocol.io/docs/learn/architecture) - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MCP
- [MCP Specification](https://modelcontextprotocol.io/) - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è MCP
- [Python MCP SDK](https://github.com/modelcontextprotocol/python-sdk) - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Python SDK (17.6k ‚≠ê)
- [FastMCP Examples](https://github.com/modelcontextprotocol/python-sdk/tree/main/examples/fastmcp) - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è FastMCP
- [MCP Server Development](https://modelcontextprotocol.io/docs/learn/server-concepts) - –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- [FastMCP Properties](https://github.com/modelcontextprotocol/python-sdk#fastmcp-properties) - –°–≤–æ–π—Å—Ç–≤–∞ –∏ –º–µ—Ç–æ–¥—ã FastMCP

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

**–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.** –î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é –ò–ª—å–∏ –ö—Ä–∞—Å–∏–Ω—Å–∫–æ–≥–æ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –≤ –ª—é–±—ã—Ö —Ü–µ–ª—è—Ö –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∏—Å—å–º–µ–Ω–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è –∞–≤—Ç–æ—Ä–∞. –ê–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –°–®–ê.

**Magic Rick Inc.**, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤ —à—Ç–∞—Ç–µ –î–µ–ª–∞–≤—ç—Ä (–°–®–ê), –¥–µ–π—Å—Ç–≤—É–µ—Ç –æ—Ç –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞ –≤ —Ü–µ–ª—è—Ö –∑–∞—â–∏—Ç—ã –µ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –±—É–¥–µ—Ç –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞—Ç—å –ª—é–±—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –°–®–ê.
