# Sales.injury JTBD Standard

## Универсальный стандарт анализа транскриптов звонков для построения JTBD-структуры

<!-- 🔒 PROTECTED SECTION: BEGIN -->

type: standard
updated: 23 Jul 2025, 16:48 CET by AI Assistant
based on: HeroesGPT Landing Analysis Standard v1.6, JTBD Scenarium Standard v4.0, Real Call Transcripts Analysis, Registry Standard v4.7, MCP Workflow Standards
version: 1.1
status: Active
workflow_protocol: mcp_sales_injury_jtbd_analysis_v1_1
mcp_implementation: advising_platform/src/mcp/workflows/sales_transcript_processor_v8_with_ai.py
tags: standard, jtbd, call_analysis, sales_optimization, root_cause_analysis, mcp_workflow, temporal_analysis

<!-- 🔒 PROTECTED SECTION: END -->

---

## 🎯 ЦЕЛЬ СТАНДАРТА

Создать систематический подход к анализу транскриптов звонков для выявления:

- **Root Cause Analysis (5-why методология)** — что сеилз не так сделал, что продажа не случилась
- **Sales Blockers** — какие блокеры и гепы у пользователя не были закрыты сеилом
- **JTBD иерархию (Big/Medium/Small)** для каждой части разговора-продажи, что сеилз сделал или не сделал
- **Decision Journey mapping** для B2B и B2C сегментов пользователей, какие гепы в принятии решений не были закрыты и привели к блокерам
- **Actionable рекомендации** для улучшения conversion rate операторов

### 🎯 Процесс продаж (sales stages)

1. **Подтверждение понимания** запроса клиентом
2. **Уточнение деталей** и параметров запчасти
3. **Информирование о наличии** и сроках доставки
4. **Поддержание доверия** через внимательное общение
5. **Подбор продукта** и альтернативных решений
6. **Дополнительные предложения** сопутствующих товаров
7. **Обработка возражений** по цене, качеству, доставке
8. **Закрытие сделки**: бронирование, оплата, подтверждение оплаты

---

## 🌳 MCP WORKFLOW TREE для Sales.injury JTBD Analysis v1.1

```
🎯 Sales.injury JTBD Analysis Workflow v1.1 (ИСПРАВЛЕННАЯ ВЕРСИЯ)
│
├── 📥 INPUT STAGE
│   ├── Call Transcript (text with timestamps (00:01:14))
│   ├── Call Metadata (agent ID, call type, order status, final outcome)
│   ├── Customer Context (product inquiry, urgency level, B2B/B2C indicators)
│   └── JTBD Reference Tree (Big/Medium/Small JTBD mapping from avtoall_jtbd_analysis_16_jul_2025.md)
│
├── 🔍 TEMPORAL ERROR DETECTION STAGE (NEW in v1.1)
│   ├── Timestamp Parsing & Error Moments Identification
│   │   ├── Parse all timestamps (00:00:26), (00:01:14), etc.
│   │   ├── Identify critical conversation turning points
│   │   ├── Extract exact operator phrases with timestamps
│   │   └── Map phrases to conversion outcomes (success/failure)
│   │
│   └── Sales Blockers Real-Time Detection
│       ├── Find moments when customer hesitates/objects
│       ├── Identify operator responses that escalate/de-escalate
│       ├── Extract quotable examples of ineffective communication
│       └── Link temporal moments to JTBD process failures
│
├── 📊 CORE ANALYSIS STAGE (REORDERED per User Requirements)
│   ├── 1️⃣ Sales Blockers Identification (FIRST STEP)
│   │   ├── INPUT: Temporal analysis + conversation turning points + final outcome
│   │   ├── PROCESS: Concrete sales obstacle identification with timestamps
│   │   │   ├── Find exact moment when sale was blocked (timestamp)
│   │   │   ├── Extract specific operator phrase that caused block
│   │   │   ├── Identify missed opportunity for conversion
│   │   │   ├── Map to Medium/Small JTBD from reference table not performed
│   │   │   └── Document impact on customer decision process
│   │   ├── **[reflections]**: Найден ли точный момент ошибки? Есть ли прямая цитата неэффективного поведения? Связан ли с конкретным JTBD из reference table?
│   │   └── OUTPUT: Specific sales_blockers with timestamps and quotes
│   │
│   ├── 2️⃣ Root Cause Analysis (5-Why) (SECOND STEP)
│   │   ├── INPUT: Identified sales_blockers + operator behavior patterns
│   │   ├── PROCESS: Sequential why-analysis chain based on JTBD failures
│   │   │   ├── Why #1: Почему клиент не купил/отказался? → Sales blocker consequence
│   │   │   ├── Why #2: Почему сеилз допустил эту ошибку? → Behavioral pattern
│   │   │   ├── Why #3: Почему не выполнил нужный JTBD? → Process/training gap
│   │   │   ├── Why #4: Почему процесс/обучение неэффективны? → System limitation
│   │   │   └── Why #5: Почему система не стимулирует правильное поведение? → Root cause
│   │   ├── **[reflections]**: Каждый "почему" связан с предыдущим уровнем? Достигли ли системной причины? Можно ли из анализа вывести actionable рекомендации? СПЕЦИФИЧЕН ли анализ для данного конкретного транскрипта (не шаблонный)?
│   │   └── OUTPUT: 5-level cause-effect chain from sales blocker to system root cause
│   │
│   ├── 3️⃣ WHEN Trigger Situation Construction (THIRD STEP)
│   │   ├── INPUT: Sales blockers + 5-why analysis + JTBD reference table
│   │   ├── PROCESS: Context creation with JTBD mapping
│   │   │   ├── Identify customer situation context (what they needed)
│   │   │   ├── Find timestamp and quote of critical operator error
│   │   │   ├── Map error to specific Medium JTBD not performed
│   │   │   ├── Map error to specific Small JTBD not performed
│   │   │   └── Construct narrative: "когда [ситуация] в [timestamp] - сеилз не выполнил [JTBD] вместо [правильного действия]"
│   │   ├── **[reflections]**: Четко ли указан момент ошибки с конкретным timestamp? Правильно ли идентифицирован невыполненный JTBD из reference table? Понятна ли связь ситуация→ошибка→блокировка? КАЖДЫЙ анализ уникален для конкретного транскрипта?
│   │   └── OUTPUT: Detailed when_trigger_situation with timestamp, JTBD reference, and error description
│   │
│   ├── 4️⃣ Communication Pattern Analysis (FOURTH STEP)
│   │   ├── INPUT: Temporal analysis + sales blockers + operator exact quotes
│   │   ├── PROCESS: Structured before/after communication comparison
│   │   │   ├── stop_words_patterns: "small-jtbd сценарий: [неэффективное поведение]\n\nlead inquiry: [цитата запроса]\n\noperator answer: [цитата ответа с ошибкой]"
│   │   │   ├── recommended_phrases: "small jtbd сценарий: [эффективное поведение]\n\nlead inquiry: [та же цитата запроса]\n\ngood_answer: [оптимизированный ответ]"
│   │   │   ├── what client get on this stage: "1. [этап 1]\n2. [этап 2]\n3. [этап 3]\n4. [этап 4]"
│   │   │   └── segment: "b2b/b2c + [аргументы классификации]"
│   │   ├── **[reflections]**: Есть ли прямые цитаты из транскрипта в stop_words_patterns? Структура соответствует требуемому формату с lead inquiry + operator answer? Четкие ли улучшенные альтернативы созданы в recommended_phrases? Уникален ли анализ для каждого транскрипта?
│   │   └── OUTPUT: Structured communication patterns with exact format requirements
│   │
│   ├── 5️⃣ JTBD Hierarchy Final Construction
│   │   ├── INPUT: Reference JTBD table + customer context + error analysis
│   │   ├── PROCESS: Map customer needs to JTBD hierarchy from reference table
│   │   │   ├── big jtbd: Map to Big JTBD from avtoall_jtbd_analysis (B1/B2/B3)
│   │   │   ├── medium jtbd: Map to specific Medium JTBD from table (M1.1-M3.3)
│   │   │   ├── small jtbd: Map to specific Small JTBD from table (S1.1-S3.12)
│   │   │   └── qualified_triggers: Extract urgency/budget/quality factors
│   │   ├── **[reflections]**: Соответствует ли JTBD реальной потребности клиента из данного транскрипта? Правильно ли использована reference table avtoall_jtbd_analysis_16_jul_2025.md? Логична ли иерархия Big→Medium→Small? НЕ шаблонны ли JTBD для каждого случая?
│   │   └── OUTPUT: Complete JTBD hierarchy mapped to reference standards
│
├── 📋 FINAL OUTPUT STAGE
│   ├── Column Structure Validation (Match Google Sheets Screenshot)
│   │   ├── Verify exact column names and order
│   │   ├── Validate data format requirements
│   │   ├── Check empty fields requirements (some fields intentionally empty)
│   │   └── Ensure line breaks and formatting preserved
│   │
│   └── Quality Validation & Registry Compliance
│       ├── **[validation]**: Все ли требуемые колонки заполнены правильно?
│       ├── **[validation]**: Соответствует ли формат каждого поля требованиям?
│       ├── **[validation]**: Есть ли временные метки и цитаты в нужных местах?
│       │
│       ├── **[DATA REALITY VALIDATION]** (CRITICAL ANTI-BULLSHIT CHECKPOINT)
│       │   ├── **[reality_check]**: Содержит ли каждая критическая колонка НЕПУСТЫЕ данные (≥10 символов)?
│       │   ├── **[content_check]**: Есть ли в first 5 rows реальный анализ (НЕ пустота)?
│       │   ├── **[rejection_criteria]**: Если >50% строк пустые → AUTOMATIC FAIL
│       │   ├── **[processor_validation]**: Генерирует ли sales_transcript_processor реальные данные?
│       │   └── **[stop_criteria]**: ОБЯЗАТЕЛЬНАЯ ОСТАНОВКА если данные не соответствуют заявленному качеству
│       │
│       ├── **[VISUAL VERIFICATION CHECKPOINT]** (MANDATORY REALITY CHECK)
│       │   ├── **[visual_inspection]**: ОБЯЗАТЕЛЬНЫЙ просмотр Google Sheets ПОСЛЕ загрузки
│       │   ├── **[reality_vs_metrics]**: Соответствуют ли заявленные success rate визуальной реальности?
│       │   ├── **[evidence_requirement]**: Могу ли показать 3+ конкретных примера качественного анализа?
│       │   ├── **[anti_confirmation_bias]**: Ищу ли я пустоты и ошибки, а НЕ подтверждение успеха?
│       │   └── **[mandatory_stop]**: STOP работы если визуальная проверка противоречит заявлениям
│       │
│       └── **[ANTI-BULLSHIT REFLECTION]** (FINAL HONESTY CHECKPOINT)
│           ├── **[honesty_question_1]**: "Действительно ли я вижу качественные данные в результирующем файле?"
│           ├── **[honesty_question_2]**: "Соответствует ли мой заявленный success rate тому, что я визуально наблюдаю?"
│           ├── **[honesty_question_3]**: "Могу ли я продемонстрировать конкретные примеры успешного анализа?"
│           ├── **[honesty_question_4]**: "Не обманываю ли я себя confirmation bias-ом?"
│           └── **[mandatory_rejection]**: Если хотя бы один ответ "НЕТ" → FULL PROCESS REJECTION
│       └── **[validation]**: Прослеживается ли логическая цепочка sales_blocker→5why→when_trigger?
│
└── 🔄 CONTINUOUS IMPROVEMENT STAGE
    ├── Pattern Recognition across multiple transcripts
    ├── JTBD reference table updates based on new patterns
    ├── Communication template refinement
    └── Process optimization recommendations
```

---

## 📊 ИТОГОВАЯ СТРУКТУРА ТАБЛИЦЫ (Google Sheets Screenshot Order)

Колонки в точном порядке согласно скриншоту:

| #   | Колонка                       | Тип данных     | Пример заполнения                                                                                                                                                                                                                             | Заполнение                                                                 |
| --- | ----------------------------- | -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| 1   | transcript                    | Длинный текст  | "Спикер 0 (00:00:00): Автол.ру, меня зовут Алексей, здравствуйте. Спикер 1 (00:00:02): Здравствуйте, Алексей. Хотел бы узнать, есть ли у вас набор для выставления резьбы болта М6?..."                                                       | Полный транскрипт с временными метками                                     |
| 2   | lead_inquiry                  | Короткий текст | "есть ли у вас набор для выставления резьбы болта М6"                                                                                                                                                                                         | Основной запрос клиента                                                    |
| 3   | when_trigger_situation        | Средний текст  | "когда клиент ищет специализированный инструмент (набор М6) в 00:01:14 - сеилз не выполнил Medium JTBD M2.1 'Альтернативное решение проблемы' - сказал 'это все далеко' вместо предложения доставки"                                          | Ситуация + timestamp + невыполненный JTBD                                  |
| 4   | root cause 5why               | Средний текст  | "Why #1: Почему клиент отказался? → Не получил удобного решения\nWhy #2: Почему не получил? → Оператор сфокусировался на ограничениях..."                                                                                                     | Цепочка 5 why от sales blocker к системной причине                         |
| 5   | sale blockers                 | Короткий текст | "В 00:01:14 оператор сказал 'это все далеко, это все на востоке' вместо предложения доставки или альтернативных решений"                                                                                                                      | Конкретные моменты ошибок с timestamps                                     |
| 6   | segment                       | Очень короткий | "b2c - частный клиент с личной потребностью, не упоминает бизнес/автопарк, решает личную проблему с инструментом"                                                                                                                             | B2B/B2C + аргументы классификации                                          |
| 7   | stop_words_patterns           | Длинный текст  | "small-jtbd сценарий: не предлагать альтернативы при отсутствии товара\n\nlead inquiry: есть ли у вас набор для выставления резьбы болта М6\n\noperator answer: это все далеко, это все на востоке"                                           | Структурированный anti-pattern с цитатами                                  |
| 8   | recommended_phrases           | Длинный текст  | "small jtbd сценарий: предложить варианты получения товара при отсутствии\n\nlead inquiry: есть ли у вас набор для выставления резьбы болта М6\n\ngood_answer: Набор есть за 1050₽. Могу предложить доставку или резерв в ближайшем магазине" | Структурированный good-pattern с оптимизацией                              |
| 9   | what client get on this stage | Средний текст  | "1. Подтверждение понимания запроса клиентом\n2. Уточнение деталей и параметров запчасти\n3. Информирование о наличии и сроках доставки\n4. Поддержание доверия через внимательное общение"                                                   | 4 пункта процесса продажи                                                  |
| 10  | big jtbd                      | Короткий текст | "получить специализированный инструмент для ремонтных работ"                                                                                                                                                                                  | Этап консультации или продажи reference table                              |
| 11  | medium jtbd                   | Короткий текст | "найти набор М6 с подтверждением наличия и вариантами получения"                                                                                                                                                                              | подэтап продажи, в которой сеилз должен применить навык из reference table |
| 12  | small jtbd                    | Короткий текст | "уточнить наличие в магазинах, узнать варианты доставки, выбрать удобный способ получения"                                                                                                                                                    | Конкретный навык сеилза из reference table                                 |
| 13  | date_time                     | Короткий текст | "2025-07-04 19:05:57"                                                                                                                                                                                                                         | Дата и время звонка, извлеченные из заголовка транскрипта                  |
| 14  | week                          | Очень короткий | "Week 27"                                                                                                                                                                                                                                     | Номер недели года, рассчитанный по дате для группировки отчетов            |

---

## 📊 РЕАЛЬНЫЕ ПРИМЕРЫ ЗАПОЛНЕНИЯ с TSV данными

### 🔍 ПРИМЕР 1: Root Cause Analysis (5-Why)

**Исходные данные из звонка:**

- `lead_inquiry`: "есть ли у вас набор для выставления резьбы болта М6"
- `outcome`: orderNotPlaced, причина: notAvailable в удобном месте

**5-Why анализ:**

```
Why #1: Почему клиент не купил набор М6?
→ Потому что товар был доступен только в магазинах на востоке Москвы

Why #2: Почему не предложили альтернативные решения?
→ Оператор не предложил предзаказ, доставку, или аналогичные товары

Why #3: Почему не выяснили срочность потребности клиента?
→ Не задавали уточняющих вопросов о временных рамках ремонта

Why #4: Почему процедуры работы с недоступными товарами неэффективны?
→ Отсутствуют скрипты для ситуаций "товар есть, но далеко"

Why #5: Почему нет системы автоматического предложения альтернатив?
→ Операторы не обучены консультативным продажам и cross-selling
```

### 🚫 ПРИМЕР 2: Sales Blockers Analysis

**Неэффективные фразы оператора (стоп-слова):**

```
"На Рябиновой нет, где-то на востоке есть, не знаю точно где"
"Такой уже нет, в это время нет" (про доставку)
"все на востоке... это все далеко"
```

**Оптимизированные фразы (power words):**

```
"Да, есть набор для М6 с шагом 1, 25 предметов, стоит 1050 рублей.
В наличии в магазине на Хабаровской. Могу предложить несколько вариантов получения"
"Понимаю, что для вас важно получить сегодня. Давайте найдем оптимальное решение"
```

### 🎯 ПРИМЕР 3: JTBD Hierarchy Construction

**Реальный кейс:** Клиент со Skoda Yeti ищет подушки двигателя

```
When Trigger: "когда владелец автомобиля сталкивается с поломкой подвески двигателя и нуждается в качественных запчастях"

Big JTBD: "обеспечить надежную работу автомобиля" (B2C individual)

Medium JTBD: "подобрать и приобрести совместимые подушки двигателя с гарантией качества"

Small JTBD: "получить консультацию по VIN-коду, узнать цены и наличие, организовать получение или заказ"

Qualified Triggers:
- Urgency: планируемый ремонт завтра ("машину сервис завтра поставлю")
- Budget: готовность к ценам 6400-6900 рублей за деталь
- Quality: интерес к репутации производителя ("это хорошая фирма?")
```

### 📊 ПРИМЕР 4: Decision Journey Mapping

**B2C Journey Analysis для кейса с набором М6:**

| Stage                         | Customer State              | Operator Performance          | Gap Analysis     | Recommendation                |
| ----------------------------- | --------------------------- | ----------------------------- | ---------------- | ----------------------------- |
| Problem Recognition (5-15s)   | ✅ "М6 набор нужен"         | ✅ Понял запрос               | No gap           | Continue                      |
| Solution Possibility (15-30s) | ✅ "1050 руб, 25 предметов" | ✅ Продукт найден             | No gap           | Continue                      |
| Personal Relevance (30-60s)   | ✅ "подходит точно"         | ✅ Характеристики совпали     | No gap           | Continue                      |
| Feasibility (1-2 min)         | ❌ "далеко ехать"           | ❌ Не предложил альтернатив   | **CRITICAL GAP** | Предложить доставку/предзаказ |
| Social Validation (2-3 min)   | ⚪ Не потребовалось         | ⚪ Не релевантно              | No gap           | N/A                           |
| Risk Evaluation (3-5 min)     | ⚪ Цена приемлема           | ✅ Информация предоставлена   | No gap           | Continue                      |
| Urgency (5-10 min)            | ❌ Не выяснили              | ❌ Не спросили "когда нужно?" | **MAJOR GAP**    | Добавить вопрос о срочности   |
| Action Simplification         | ❌ Усложнили процесс        | ❌ "только на востоке"        | **CRITICAL GAP** | Упростить получение           |

**B2B Journey Analysis для кейса с подушками Skoda:**

| Stage                | Stakeholder Concern       | Operator Response           | Gap Analysis           |
| -------------------- | ------------------------- | --------------------------- | ---------------------- |
| Business Impact      | "ремонт не может ждать"   | ✅ Понял срочность          | Covered                |
| Solution-Problem Fit | "подходят ли к VIN?"      | ✅ Проверил по VIN          | Well covered           |
| Internal Champion    | клиент = decision maker   | ✅ Работал напрямую         | Well covered           |
| Budget Justification | "сколько стоит?"          | ✅ Назвал цены всех деталей | Well covered           |
| Risk Mitigation      | "качество производителя?" | ⚠️ "средняя, китай"         | **IMPROVEMENT NEEDED** |
| Implementation       | "как заказать?"           | ❌ Перенаправил в розницу   | **MAJOR GAP**          |

### 🎯 ПРИМЕР 5: Детализированная JTBD иерархия по процессу продаж

**Big JTBD по этапам продаж:**

1. **"подтвердить понимание запроса"** → Medium JTBD: переспросить детали, повторить параметры → Small JTBD: задать уточняющие вопросы
2. **"уточнить технические детали"** → Medium JTBD: проверить совместимость по VIN/модели → Small JTBD: найти точные характеристики
3. **"проинформировать о наличии"** → Medium JTBD: проверить склады и доступность → Small JTBD: назвать конкретные магазины
4. **"поддержать доверие"** → Medium JTBD: продемонстрировать экспертность → Small JTBD: объяснить преимущества товара
5. **"подобрать продукт"** → Medium JTBD: предложить альтернативы при отсутствии → Small JTBD: сравнить варианты по цене/качеству
6. **"предложить дополнительное"** → Medium JTBD: выявить сопутствующие потребности → Small JTBD: предложить комплектующие
7. **"обработать возражения"** → Medium JTBD: снять барьеры по цене/качеству → Small JTBD: привести конкретные аргументы
8. **"закрыть сделку"** → Medium JTBD: упростить процесс покупки → Small JTBD: предложить способы оплаты/получения

---

## 📋 COLUMN FILLING INSTRUCTIONS

### Обязательная структура таблицы для каждого звонка

| Колонка             | Описание заполнения                               | Источник                           | Пример значения                                   |
| ------------------- | ------------------------------------------------- | ---------------------------------- | ------------------------------------------------- |
| **transcript**      | Полный текст транскрипта с временными метками     | Raw call data                      | "Спикер 0 [00:05]: Алло, добрый день, Автовсё..." |
| **lead_inquiry**    | Основной запрос клиента (первое обращение)        | Извлечение из начала разговора     | "набор для выставления резьбы болта М6"           |
| **root cause 5why** | что сеилз не так сделал, что продажа не случилась | Root cause + sales analysis + 5why | "1. "                                             |
| **sales_blockers**  | Конкретные препятствия для закрытия сделки        | Root cause + sales analysis        | "нет информации о наличии в конкретных магазинах" |

| **segment** | Классификация типа клиента с обоснованием | Контекстный анализ + аргументация | "b2b - упоминает автопарк/грузовик, говорит про простой, бизнес-контекст" или "b2c - частный клиент с личной потребностью, не упоминает бизнес, решает личную проблему" |
| **stop_words_patterns** | Структурированный anti-pattern с цитатами | Негативные примеры из транскрипта в формате | "small-jtbd сценарий: не предлагать альтернативы при отсутствии товара\n\nlead inquiry: есть ли у вас набор для выставления резьбы болта М6\n\noperator answer: это все далеко, это все на востоке" |
| **recommended_phrases** | Структурированный good-pattern с оптимизацией | Генерация на основе стандартов в формате | "small jtbd сценарий: предложить варианты получения товара при отсутствии\n\nlead inquiry: есть ли у вас набор для выставления резьбы болта М6\n\ngood_answer: Набор есть за 1050₽. Могу предложить доставку или резерв в ближайшем магазине" |
| **what client get on this stage** | 4 пункта процесса продажи (было: вопросы на каждой стадии) | Decision journey mapping + sales stages | "1. Подтверждение понимания запроса клиентом\n2. Уточнение деталей и параметров запчасти\n3. Информирование о наличии и сроках доставки\n4. Поддержание доверия через внимательное общение" |
| **when ситуация в big_jtbd** | Триггерная ситуация активации JTBD | Контекстный анализ | "когда клиент ищет специализированный инструмент для ремонта" |
| **big_jtbd** | Стратегическая цель клиента | High-level job identification | "быстро получить нужный инструмент для продолжения ремонтных работ" |
| **medium_jtbd** | Тактический процесс достижения Big JTBD | Process decomposition | "найти точный набор с необходимыми характеристиками и убедиться в качестве" |
| **small_jtbd** | Операционные действия для Medium JTBD | Micro-task identification | "получить подтверждение технических параметров, узнать цену и способы получения" |
| **qualified_triggers** | Дополнительные квалифицирующие факторы | Advanced pattern analysis | "срочность ремонта, бюджетные ограничения, требования к качеству" |

### Порядок заполнения (строгая последовательность)

**Этап 1: Basic Extraction (5 минут)**

1. `transcript` - копируем исходный текст с временными метками
2. `lead_inquiry` - выделяем первый запрос клиента
3. `segment` - классифицируем B2B/B2C

**Этап 2: Sales Blockers Analysis (8 минут)** 4. `sales_blockers` - выявляем конкретные препятствия для сделки 5. `как не нужно говорить, что стоп-слова` - извлекаем неэффективные фразы оператора
пример записи в ячейки таблицы для каждого разгвора:

- small-jtbd сценарий: не подтверждать детали запроса и не переспрашивать, сопровождая предоставление информации без взаимопонимания
- lead inqury: Не могли бы вы меня соединить с кем-то, что по МАЗу в консультации нужна, что стоит по данным частям?
- operator answer: За шесть тысяч десять рублей.

**Этап 3: Communication Optimization (7 минут)** 6. `recommended_phrases` - создаем оптимизированные фразы
пример записи в ячейки таблицы для каждого разговора:

- small jtbd сценарий: подтверждать детали заказа и параметры, чтобы клиент почувствовал внимание и уверенность, что его запрос правильно понят
- lead inquiry: Не могли бы вы меня соединить с кем-то, что по МАЗу в консультации нужна, что стоит по данным частям?
- good_answer: Понял вас, давайте уточним номер и характеристики нужной детали, чтобы я мог предложить подходящий вариант и проверить наличие

7. `what client get on this stage` - 4 пункта процесса продажи (ПЕРЕИМЕНОВАНО)
   пример заполнения для каждого разговора:
   "1. Подтверждение понимания запроса клиентом
8. Уточнение деталей и параметров запчасти
9. Информирование о наличии и сроках доставки
10. Поддержание доверия через внимательное общение"

11. `segment` - B2B/B2C классификация с аргументами
    примеры заполнения:

- "b2b - клиент упоминает грузовик/автопарк, говорит про простой техники, business impact контекст"
- "b2c - частный клиент с личной потребностью, не упоминает бизнес, решает проблему для личного авто"

**Этап 4: JTBD Hierarchy Construction (15 минут)** 9. `when_trigger_situation` - определяем триггерную ситуацию с привязкой к ошибке
формат: "когда [контекст клиента] в [timestamp] - сеилз не выполнил [Medium JTBD] [конкретное описание ошибки] вместо [правильного действия]"

10. `big jtbd` - определяем стратегическую цель клиента
11. `medium jtbd` - определяем тактический процесс, которой должен выполнить сеилз
12. `small jtbd` - определяем конкретные действия-навыки сеилза для выполнения medium JTBD

**Этап 5: Advanced Analysis (10 минут)** 13. `qualified_triggers` - дополнительные квалифицирующие факторы (срочность, бюджет, качество) 14. `date_time` - извлечение даты и времени из заголовка транскрипта 15. `week` - расчет номера недели для группировки weekly reports

---

## 🔍 REFLECTION CHECKLIST & QUALITY REVIEW SYSTEM

### 📋 ЧЕКЛИСТ КАЧЕСТВЕННОЙ РАБОТЫ (Quality Score: Target 90+/100)

**1. СТРУКТУРА ДАННЫХ (20 points)**

- [ ] Точно 14 колонок в каждой строке TSV (включая date_time и week)
- [ ] Все заголовки соответствуют sales.injury standard v1.1
- [ ] Нет пустых обязательных полей
- [ ] Google Sheets сохраняет существующую структуру и находит нужные колонки
- [ ] Никакого принудительного форматирования (цвета, жирный текст)

**2. КАЧЕСТВО ИЗВЛЕЧЕНИЯ ДАННЫХ (25 points)**

- [ ] lead_inquiry содержит реальный запрос клиента (НЕ оператора)
- [ ] Удалены временные метки типа (00:00:02) из lead_inquiry
- [ ] sales_blockers находят реальные негативные паттерны, НЕ приветствие
- [ ] Временные метки в sales_blockers точны и привязаны к ошибкам
- [ ] Анализ специфичен для каждого транскрипта

**3. JTBD ИЕРАРХИЯ (25 points)**

- [ ] Big JTBD соответствует типу запроса из reference table
- [ ] Medium JTBD включает "с подтверждением наличия и вариантами получения"
- [ ] Small JTBD включает "уточнить наличие в магазинах, узнать варианты доставки"
- [ ] Все JTBD взяты из [rick.ai] clients/avtoall.ru/[4] whatsapp-jtbd-tracktion/avtoall_jtbd_analysis_16_jul_2025.md
- [ ] Иерархия логична и связана

**4. ROOT CAUSE ANALYSIS (5-Why) (20 points)**

- [ ] Каждый "Why" логически следует из предыдущего
- [ ] Анализ специфичен для конкретного транскрипта (НЕ универсальный шаблон)
- [ ] Доходит до системных причин
- [ ] Связан с реальными проблемами процесса продаж
- [ ] Дает actionable insights для улучшений

**5. ТЕХНИЧЕСКАЯ РЕАЛИЗАЦИЯ (10 points)**

- [ ] Обработка ≤5 секунд для полного датасета
- [ ] Валидация структуры проходит успешно (14 колонок включая date_time и week)
- [ ] Нет ошибок в процессе обработки
- [ ] Google Sheets integration работает корректно с поиском существующих колонок
- [ ] **БЕРЕЖНОЕ ОБРАЩЕНИЕ**: система НЕ удаляет существующие данные, изучает структуру таблицы, находит нужные колонки по названиям и заполняет только новые строки без изменения форматирования

### 🚨 CRITICAL ANTI-BULLSHIT CHECKPOINTS (MANDATORY BEFORE DELIVERY)

**CHECKPOINT 1: DATA REALITY VALIDATION**

- [ ] **[MANDATORY]**: Визуально открыл Google Sheets ПОСЛЕ загрузки и вижу РЕАЛЬНЫЕ данные
- [ ] **[MANDATORY]**: В первых 5 строках каждой критической колонки есть содержательный текст (≥10 символов)
- [ ] **[MANDATORY]**: Менее 30% строк пустые в критических колонках (sale_blockers, root_cause_5why, stop_words_patterns, recommended_phrases)
- [ ] **[MANDATORY]**: Мой заявленный success rate соответствует тому, что я ВИЗУАЛЬНО наблюдаю в Google Sheets

**CHECKPOINT 2: PROCESSOR OUTPUT VALIDATION**

- [ ] **[MANDATORY]**: Sales_transcript_processor генерирует НЕПУСТЫЕ данные (не только пустые строки)
- [ ] **[MANDATORY]**: TSV файл содержит реальный анализ в критических колонках
- [ ] **[MANDATORY]**: Процессор НЕ генерирует >50% пустых значений в обязательных полях
- [ ] **[MANDATORY]**: Каждый анализ уникален для конкретного транскрипта (НЕ шаблонный)

**CHECKPOINT 3: VALIDATOR HONESTY CHECK**

- [ ] **[MANDATORY]**: TDD валидатор НЕ считает пустые ячейки как "success matches"
- [ ] **[MANDATORY]**: Валидатор проверяет СОДЕРЖАНИЕ, а не только структурное совпадение
- [ ] **[MANDATORY]**: Success rate рассчитывается только для НЕ пустых совпадающих значений
- [ ] **[MANDATORY]**: Валидатор ОТКЛОНЯЕТ результат если <70% полей содержат качественные данные

**CHECKPOINT 4: FINAL HONESTY REFLECTION**

- [ ] **[MANDATORY]**: Я могу показать 3+ конкретных примера качественного анализа из результата
- [ ] **[MANDATORY]**: Визуальная проверка Google Sheets подтверждает мои заявления о success rate
- [ ] **[MANDATORY]**: Я НЕ страдаю от confirmation bias - активно искал ошибки и пустоты
- [ ] **[MANDATORY]**: Готов продемонстрировать реальные данные из любой строки результата

**🛑 AUTOMATIC REJECTION CRITERIA:**

- Если любой из MANDATORY checkpoints = FALSE → FULL PROCESS REJECTION
- Если >50% строк пустые в критических колонках → AUTOMATIC FAIL
- Если visual verification противоречит заявленным метрикам → STOP WORK
- Если не могу показать 3+ примера качественного анализа → REJECT DELIVERY

### 🚨 ТИПИЧНЫЕ КОСЯКИ с 5-Why анализом согласно Root Cause Standard

**КОСЯК 1: Дублирование колонок в Google Sheets**
**Root Cause Chain:**

- Why #1: Почему появились дублирующиеся колонки? → clear_existing очищает данные, но не структуру заголовков
- Why #2: Почему логика неправильная? → Программист неправильно понял требование "очистить данные"
- Why #3: Почему требование неправильно понято? → Не было четко сказано "сохранить существующую структуру"
- Why #4: Почему не было четких требований? → Недостаточное тестирование с существующими данными
- Why #5: Почему недостаточное тестирование? → Фокус на новых данных, а не на интеграции с существующими

**КОСЯК 2: Временные метки в lead_inquiry**
**Root Cause Chain:**

- Why #1: Почему захватывается временная метка? → Regex паттерн слишком простой
- Why #2: Почему не исключали временные метки? → Не было предусмотрено в первоначальном дизайне
- Why #3: Почему не предусмотрели? → Не анализировали примеры реальных данных
- Why #4: Почему не анализировали примеры? → Фокус на архитектуре, а не на качестве данных
- Why #5: Почему не было фокуса на качестве? → TDD подход не включал проверку качества извлеченных данных

**КОСЯК 3: Приветствие как sales blocker**
**Root Cause Chain:**

- Why #1: Почему приветствие считается блокером? → Логика ищет первый ответ оператора
- Why #2: Почему логика такая примитивная? → Не было определено, что является настоящим блокером
- Why #3: Почему не определили критерии? → Фокус на технической реализации, а не на бизнес-логике
- Why #4: Почему не было фокуса на бизнес-логике? → Недостаточно времени на анализ требований
- Why #5: Почему недостаточно времени? → Приоритет скорости разработки над качеством анализа

**КОСЯК 4: Отсутствие колонок date_time и week**
**Root Cause Chain:**

- Why #1: Почему пропустили обязательные колонки? → Не проверили полную структуру таблицы по скриншоту
- Why #2: Почему не проверили скриншот? → Сфокусировались на технических аспектах, а не на требованиях пользователя
- Why #3: Почему не следовали стандарту полностью? → Не применили **[reflections]** на каждом этапе
- Why #4: Почему не использовали reflection checkpoints? → Проигнорировали Registry Standard v4.7 требования
- Why #5: Почему игнорировали стандарты? → **СИСТЕМНАЯ ПРИЧИНА: Приоритет скорости над качeством**

**КОСЯК 5: Шаблонный анализ вместо специфичного**
**Root Cause Chain:**

- Why #1: Почему все 5-Why одинаковые? → Применили универсальный шаблон ко всем транскриптам
- Why #2: Почему не анализировали каждый транскрипт индивидуально? → Не извлекали уникальные детали из каждого звонка
- Why #3: Почему не извлекали детали? → Не применили **temporal error detection** согласно MCP workflow v1.1
- Why #4: Почему не следовали MCP workflow? → Не прочитали полностью обновленный стандарт
- Why #5: Почему не прочитали? → **СИСТЕМНАЯ ПРИЧИНА: Assumption-driven development вместо requirements-driven**

### 🎯 REFLECTION QUESTIONS (Post-Analysis Quality Check)

**Root Cause Analysis Quality:**

- [ ] Достигнута ли системная причина на 5-м уровне?
- [ ] Логична ли последовательность причин?
- [ ] Есть ли actionable insights для каждого уровня?
- [ ] Связаны ли выявленные причины с конкретными system improvements?

**Sales Blockers Analysis Quality:**

- [ ] Выявлены ли все конкретные препятствия для закрытия сделки?
- [ ] Есть ли прямая связь sales_blockers с проблемами из транскрипта?
- [ ] Учтены ли сегментные различия (B2B vs B2C)?
- [ ] Measurable и actionable ли каждый blocker?

**Communication Patterns Completeness:**

- [ ] Есть ли прямые цитаты неэффективных фраз из транскрипта в колонке "как не нужно говорить"?
- [ ] Созданы ли конкретные улучшенные альтернативы в колонке "как хотим, чтобы говорили"?
- [ ] Определены ли критерии понимания для каждой стадии продажи?
- [ ] Готовы ли примеры к использованию в training без дополнительной обработки?

**JTBD Hierarchy Structure:**

- [ ] Четко ли определена "when ситуация в big_jtbd" как trigger?
- [ ] Соответствует ли Big JTBD стратегическому уровню клиента?
- [ ] Логично ли декомпозирована иерархия Big→Medium→Small JTBD?
- [ ] Добавлены ли qualified_triggers для advanced сегментации?

**Advanced Analysis Integration:**

- [ ] Соответствует ли классификация segment (B2B/B2C) фактическому контексту звонка?
- [ ] Включают ли qualified_triggers факторы срочности, бюджета и качества?
- [ ] Все ли 12 колонок заполнены согласно примерам значений?
- [ ] Соблюден ли временной лимит 45 минут на анализ одного звонка?

---

## 🔍 QUALITY CHECKLIST v2.0 - Sales Analysis & Google Sheets Upload

_Обновлено согласно Registry Standard v4.7 и MCP workflow protocol_

### 📊 1. СТРУКТУРА ДАННЫХ (20 points)

- [ ] Точно 14 колонок согласно sales.injury standard v1.1
- [ ] Заголовки соответствуют структуре: transcript, lead_inquiry, when_trigger_situation, root cause 5why, sale blockers, segment, stop_words_patterns, recommended_phrases, what client get on this stage, big jtbd, medium jtbd, small jtbd, date_time, week
- [ ] Каждая строка содержит данные во всех колонках
- [ ] Отсутствуют пустые строки или некорректные разделители

### 📝 2. ФОРМАТИРОВАНИЕ (25 points)

- [ ] Формат why-анализа: why1:, why2:, why3:, why4:, why5: (БЕЗ пробелов и символов #)
- [ ] Мягкие переносы: " \n" (с пробелом) вместо жестких переносов \n
- [ ] Применено в колонках: root_cause_5why, stop_words_patterns, recommended_phrases, what_client_get_on_this_stage
- [ ] Отсутствуют артефакты форматирования (остаточные Why #1:, \\n)
- [ ] Корректная кодировка UTF-8 для всех символов

### 🎯 3. КАЧЕСТВО АНАЛИЗА (25 points)

- [ ] lead_inquiry БЕЗ временных меток типа (00:00:02)
- [ ] sales_blockers содержат реальные негативные паттерны (НЕ приветствия)
- [ ] Анализ специфичен для каждого транскрипта (НЕ шаблонный)
- [ ] 5-Why анализ достигает системной причины на 5-м уровне
- [ ] JTBD иерархия логически связана: Big→Medium→Small

### 📤 4. GOOGLE SHEETS UPLOAD (20 points)

- [ ] **НИКАКОГО форматирования**: НЕТ цвета, фона, шрифтов
- [ ] **Код находит нужные колонки по названиям** (НЕ фиксированные позиции)
- [ ] **Записывает значения в существующие ячейки** (НЕ удаляет данные)
- [ ] **Сохраняет существующую структуру** Google Sheets
- [ ] **Загрузка в лист, указанный пользователем** (НЕ hardcoded gid)

### ✅ 5. TDD ВАЛИДАЦИЯ (10 points)

- [ ] 100% соответствие данных TSV и Google Sheets
- [ ] Все целевые колонки обновлены корректно
- [ ] Проверка на выборке из минимум 10 строк
- [ ] Отсутствие расхождений в форматировании

## 🎯 КРИТЕРИИ ПРОХОЖДЕНИЯ

- **Quality Score ≥90/100**: Обязательное условие для доставки
- **TDD Success Rate = 100%**: Все проверки должны пройти
- **Пользователь НЕ получает брак**: Проверить дважды перед доставкой

## 🔧 ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ (Registry Standard v4.7)

1. **Atomic Operations**: Код загрузки разбит на проверяемые этапы
2. **Reflection Checkpoints**: Валидация после каждого этапа загрузки
3. **Бережная загрузка**: Поиск колонок по названиям динамически
4. **Пользовательский лист**: Запись в указанный пользователем лист
5. **Сохранение данных**: НЕ удалять существующие данные
6. **TDD валидация**: Автоматическая проверка после загрузки

---

## 📊 WEEKLY JTBD TRACKING & REPORTING FRAMEWORK

### 📈 Еженедельная система отслеживания несделанных продаж по типам JTBD

**Цель**: Создание системы отслеживания количества несделанных продаж по каждому типу JTBD для выявления наиболее проблемных сценариев и приоритизации улучшений в скриптах продаж.

### 🔢 Дополнительные колонки для отчетности

```
date_time        | week | big_jtbd_standard | medium_jtbd_standard | small_jtbd_standard
2025-07-04 17:43 | 27   | техническая задача | экспертная консультация | детали потребности
```

**Формула для расчета недели**: `=ISOWEEKNUM(A2)` где A2 содержит date_time

### 📋 JTBD Taxonomy Standardization (на основе реальных данных Avtoall)

**BIG JTBD (3 стандартные категории):**

- `решить техническую задачу с профессиональной поддержкой` (85.5% звонков)
- `обеспечить надежную работу транспортного средства` (14.3% звонков)
- `получить специализированный инструмент для ремонтных работ` (0.2% звонков)

**MEDIUM JTBD (3 стандартные категории):**

- `получить экспертную консультацию и подходящее решение` (85.5%)
- `подобрать совместимую запчасть с гарантией качества и доставки` (14.3%)
- `найти нужный набор инструментов с подтверждением технических характеристик` (0.2%)

**SMALL JTBD (3 стандартные категории):**

- `уточнить детали потребности и выбрать оптимальный вариант действий` (85.5%)
- `получить консультацию по совместимости, узнать цены и организовать получение` (14.3%)
- `уточнить наличие конкретного набора, узнать цену и варианты получения товара` (0.2%)

### 📊 Структура сводной таблицы еженедельной отчетности

```
Неделя | Big JTBD Type | Medium JTBD Type | Small JTBD Type | Количество несделанных продаж | Процент от общего
27     | техническая задача | экспертная консультация | детали потребности | 156 | 85.5%
27     | надежная работа ТС | совместимая запчасть | консультация по совместимости | 42 | 14.3%
28     | техническая задача | экспертная консультация | детали потребности | 142 | 82.1%
```

### 🎯 Business Metrics для еженедельного мониторинга

**Key Performance Indicators:**

- Динамика количества несделанных продаж по каждому JTBD типу
- Процентное соотношение проблемных сценариев
- Еженедельные тренды по категориям Big/Medium/Small JTBD
- Эффективность внедренных улучшений скриптов продаж

**Применение результатов:**

- Приоритизация обучения операторов по самым проблемным JTBD сценариям
- Разработка targeted скриптов для наиболее частых типов несделанных продаж
- A/B тестирование улучшений communication patterns по приоритетным категориям
- Измерение ROI от внедрения рекомендаций standard

### 📋 Расширенная колонная структура TSV (15 колонок)

**Исходные 12 колонок (сохраняются без изменений):**

1. transcript
2. lead_inquiry
3. when_trigger_situation
4. root cause 5why
5. sale blockers
6. segment
7. stop_words_patterns
8. recommended_phrases
9. what client get on this stage
10. big jtbd
11. medium jtbd
12. small jtbd

**Новые 3 колонки для отчетности:** 13. date_time (извлекается из исходных данных) 14. week (формула =ISOWEEKNUM(date_time)) 15. big_jtbd_standard (mapping к стандартным категориям) 16. medium_jtbd_standard (mapping к стандартным категориям) 17. small_jtbd_standard (mapping к стандартным категориям)

**Итого**: 17 колонок для полной системы еженедельной отчетности и JTBD analytics

---

## 🎯 SUCCESS CRITERIA

**Качественные критерии:**

- Каждый анализ содержит полную 5-why цепочку до системной причины
- JTBD иерархия покрывает все уровни (Big/Medium/Small) с четкими триггерами
- Sales optimization содержит конкретные, actionable рекомендации
- Communication patterns анализ включает примеры для training

**Количественные метрики:**

- Время анализа одного звонка: 30-45 минут
- Выход на системные insights: 100% случаев
- Actionable recommendations: минимум 5 на звонок
- Conversion improvement potential: 15-25% для каждого паттерна

**Validation критерии:**

- Root cause analysis проходит logic check (причины → следствия)
- JTBD hierarchy соответствует стандарту v4.0 (3-7 Big, 5-20 Medium)
- Sales recommendations готовы к A/B тестированию
- Training materials готовы к использованию без дополнительной обработки

---

## 📈 WEEKLY IMPLEMENTATION FRAMEWORK

**Week 1-2: Foundation Building**

- Внедрение базовых скриптов на основе анализа
- Обучение техническим консультациям
- Запуск A/B тестирования communication patterns

**Week 3-4: Process Optimization**

- Развитие consultative selling навыков
- Интеграция decision journey insights
- Оптимизация objection handling

**Week 5-6: Advanced Implementation**

- Сегментированные подходы для B2B/B2C
- Комплексные sales scenarios
- Proactive customer service elements

**Week 7-8: Mastery & Scaling**

- Advanced objection handling techniques
- Cross-selling и up-selling integration
- Performance metrics optimization

---

## 🔧 TECHNICAL REQUIREMENTS

**Input Data Format:**

- Transcript: Text with speaker identification and timestamps
- Metadata: Agent ID, call type, segment, outcome
- Context: Product category, seasonal factors, business objectives

**Output Structure:**

- Structured analysis report (Markdown format)
- Training materials (script templates)
- Implementation roadmap (weekly milestones)
- Success metrics dashboard (KPI tracking)

**Quality Assurance:**

- Each analysis undergoes reflection checkpoint validation
- Cross-reference with established standards (JTBD v4.0, HeroesGPT v1.6)
- Peer review for complex cases or edge scenarios
- Continuous improvement based on implementation results
