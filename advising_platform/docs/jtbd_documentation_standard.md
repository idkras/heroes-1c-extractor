# Стандарт JTBD-документации кода

## Что такое JTBD (Jobs To Be Done)

JTBD (Jobs To Be Done) — это методология, фокусирующаяся на задачах, которые пользователь или разработчик стремится выполнить, вместо описания лишь функциональности инструмента. В контексте документации кода, JTBD позволяет понять, _зачем_ существует тот или иной компонент и какую ценность он приносит.

## Основные принципы JTBD-документации

1. **Сфокусированность на задаче**: документация описывает, какую задачу решает компонент, а не только как он работает
2. **Контекст использования**: документация объясняет, в каких ситуациях следует использовать компонент
3. **Ожидаемый результат**: документация четко указывает, какой результат достигается при использовании компонента
4. **Соответствие бизнес-целям**: документация показывает связь между техническим решением и бизнес-ценностью

## Формат JTBD-описания

JTBD-формат следует шаблону:

```
Я (роль) хочу (действие), чтобы (результат/ценность).
```

Где:
- **Роль** — кто выполняет задачу (разработчик, пользователь, администратор)
- **Действие** — что конкретно нужно сделать
- **Результат/ценность** — какая польза от этого действия

## Стандарт документации для разных компонентов

### Для модулей и пакетов

```python
"""
JTBD:
Я (разработчик) хочу (действие с модулем), чтобы (результат).

Взаимодействие:
- Принимает данные от: [модуль1], [модуль2]
- Передает данные в: [модуль3], [модуль4]

Примеры использования:
```python
from module import function
result = function(input_data)
```
"""
```

### Для классов

```python
class MyClass:
    """
    JTBD:
    Я (разработчик) хочу (действие с классом), чтобы (результат).
    
    Жизненный цикл:
    1. Инициализация: [описание инициализации]
    2. Основная работа: [описание основных операций]
    3. Завершение работы: [описание завершения]
    
    Пример использования:
    ```python
    instance = MyClass(param1, param2)
    result = instance.method()
    instance.cleanup()
    ```
    """
```

### Для методов и функций

```python
def my_function(param1, param2):
    """
    JTBD:
    Я (разработчик) хочу (действие с функцией), чтобы (результат).
    
    Args:
        param1: [описание параметра]
        param2: [описание параметра]
    
    Returns:
        [описание возвращаемого значения]
    
    Raises:
        [описание возможных исключений]
    
    Пример:
    ```python
    result = my_function("value", 42)
    ```
    """
```

## Интеграция с существующими стандартами

JTBD-документация дополняет, а не заменяет другие форматы документации:

- **Docstrings**: JTBD добавляется в начало документации, затем следует стандартная документация
- **Type Hints**: Продолжают использоваться вместе с JTBD
- **Комментарии в коде**: Используются для пояснения сложных фрагментов

## Примеры JTBD-документации

### Пример для кеш-менеджера

```python
class CacheManager:
    """
    JTBD:
    Я (разработчик) хочу эффективно управлять кешем файлов, чтобы ускорить доступ к часто используемым данным и уменьшить нагрузку на систему.
    
    Взаимодействие:
    - Принимает данные от: модуль синхронизации, обработчики триггеров
    - Передает данные в: менеджер памяти, система оповещений
    
    Пример использования:
    ```python
    manager = CacheManager()
    manager.cache_file(file_path)
    content = manager.get_cached_file(file_path)
    ```
    """
```

### Пример для триггера задачи

```python
def process_task_create_trigger(task_name, context):
    """
    JTBD:
    Я (администратор системы) хочу автоматически обрабатывать создание новых задач, чтобы обеспечить их корректную регистрацию и выполнение необходимых действий.
    
    Args:
        task_name: Название задачи
        context: Контекст выполнения триггера
    
    Returns:
        TriggerResult: Результат обработки триггера
    
    Пример:
    ```python
    result = process_task_create_trigger("Оптимизация кеша", {"priority": "high"})
    ```
    """
```

## Пути использования в проекте

1. Добавление JTBD-документации к новым компонентам
2. Постепенное обновление существующих компонентов
3. Обязательное указание JTBD для ключевых классов и модулей
4. Добавление JTBD в README и общую документацию проекта

## Автоматизация поддержки

Триггеры задач автоматически проверяют наличие JTBD-документации и напоминают о необходимости её добавления при отсутствии.