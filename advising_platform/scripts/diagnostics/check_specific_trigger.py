#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞.
–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è fix_trigger_system.py –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python check_specific_trigger.py [—Ç–∏–ø_—Ç—Ä–∏–≥–≥–µ—Ä–∞]
–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤: task, incident, hypothesis, standard

–ê–≤—Ç–æ—Ä: AI Assistant
–î–∞—Ç–∞: 20 –º–∞—è 2025
"""

import os
import sys
import logging
import traceback
from datetime import datetime

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger("check_specific_trigger")

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥—É–ª–∏
try:
    from advising_platform.src.core.registry.trigger_handler import (
        TriggerHandler, TriggerType, TriggerContext, get_handler
    )
    from advising_platform.src.tools.reporting.report_interface import report_progress
    
    logger.info("–ú–æ–¥—É–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã")
except ImportError as e:
    logger.error(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤: {e}")
    sys.exit(1)

def test_task_trigger():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏."""
    logger.info("–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏")
    
    # –ü–æ–ª—É—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
    handler = get_handler(report_progress_func=report_progress)
    
    # –°–æ–∑–¥–∞–µ–º –¥–∞—Ç—É-–≤—Ä–µ–º—è –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
    
    # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞
    context = TriggerContext(
        trigger_type=TriggerType.TASK_CREATE,
        data={
            "title": f"–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞ {timestamp}",
            "description": "–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤",
            "file_path": f"test_task_{timestamp}.md",
            "properties": {"status": "–ù–æ–≤–∞—è", "priority": "–í—ã—Å–æ–∫–∏–π"}
        },
        source="diagnosis"
    )
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä
    result = handler.handle_trigger(context)
    
    # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    logger.info(f"–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ task_create: {result.success}")
    if result.success:
        print(f"‚úÖ –¢—Ä–∏–≥–≥–µ—Ä task_create —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª!")
    else:
        print(f"‚ùå –¢—Ä–∏–≥–≥–µ—Ä task_create –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π: {result.message}")
    
    return result.success

def test_incident_trigger():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞."""
    logger.info("–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞")
    
    # –ü–æ–ª—É—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
    handler = get_handler(report_progress_func=report_progress)
    
    # –°–æ–∑–¥–∞–µ–º –¥–∞—Ç—É-–≤—Ä–µ–º—è –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
    
    # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞
    context = TriggerContext(
        trigger_type=TriggerType.INCIDENT_CREATE,
        data={
            "title": f"–¢–µ—Å—Ç–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç {timestamp}",
            "description": """–¢–µ—Å—Ç–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ 5-–ø–æ—á–µ–º—É –∞–Ω–∞–ª–∏–∑–∞.

### –ü–æ—á–µ–º—É #1: –ü–æ—á–µ–º—É —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ?
**–û—Ç–≤–µ—Ç:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã.

### –ü–æ—á–µ–º—É #2: –ü–æ—á–µ–º—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞?
**–û—Ç–≤–µ—Ç:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.

### –ü–æ—á–µ–º—É #3: –ü–æ—á–µ–º—É –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º?
**–û—Ç–≤–µ—Ç:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–∏–≤–∞–ª–∞—Å—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ü–æ—á–µ–º—É #4: –ü–æ—á–µ–º—É –Ω–µ –±—ã–ª–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?
**–û—Ç–≤–µ—Ç:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–ª–∞—Å—å –≤ —É—Å–ª–æ–≤–∏—è—Ö –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ü–æ—á–µ–º—É #5: –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –±—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ?
**–û—Ç–≤–µ—Ç:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –±—ã—Å—Ç—Ä–æ –≤—ã–ø—É—Å—Ç–∏—Ç—å MVP –ø—Ä–æ–¥—É–∫—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∏–ø–æ—Ç–µ–∑.

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–¥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞.""",
            "file_path": f"test_incident_{timestamp}.md",
            "properties": {"status": "–ù–æ–≤—ã–π", "severity": "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π"}
        },
        source="diagnosis"
    )
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä
    result = handler.handle_trigger(context)
    
    # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    logger.info(f"–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ incident_create: {result.success}")
    if result.success:
        print(f"‚úÖ –¢—Ä–∏–≥–≥–µ—Ä incident_create —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª!")
    else:
        print(f"‚ùå –¢—Ä–∏–≥–≥–µ—Ä incident_create –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π: {result.message}")
    
    return result.success

def test_hypothesis_trigger():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–ø–æ—Ç–µ–∑—ã."""
    logger.info("–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–ø–æ—Ç–µ–∑—ã")
    
    # –ü–æ–ª—É—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
    handler = get_handler(report_progress_func=report_progress)
    
    # –°–æ–∑–¥–∞–µ–º –¥–∞—Ç—É-–≤—Ä–µ–º—è –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
    
    # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞
    context = TriggerContext(
        trigger_type=TriggerType.HYPOTHESIS_CREATE,
        data={
            "title": f"–¢–µ—Å—Ç–æ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞ {timestamp}",
            "description": """**–ì–∏–ø–æ—Ç–µ–∑–∞**: –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## –†–∏—Å—É–µ–º–∞—è –º–∏—à–µ–Ω—å (RAT)
**–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å**: –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–∞ –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ä–æ–∫–∏ —Å —Ç–µ–∫—É—â–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.
**–ê–º–±–∏—Ü–∏–æ–∑–Ω–æ—Å—Ç—å**: –£–ª—É—á—à–µ–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏—Ç –ø–æ–ª–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
**–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Ç–∏–ø —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω.

## –ö—Ä–∏—Ç–µ—Ä–∏–π —Ñ–∞–ª—å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º–æ—Å—Ç–∏
–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–∏–ø —Ç—Ä–∏–≥–≥–µ—Ä–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –≥–∏–ø–æ—Ç–µ–∑–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–æ–≤–µ—Ä–≥–Ω—É—Ç–æ–π.

## –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–∏–ø–æ—Ç–µ–∑—ã –±—É–¥–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É—Å–ø–µ—à–Ω—ã—Ö –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤.""",
            "file_path": f"test_hypothesis_{timestamp}.md",
            "properties": {"status": "–ù–æ–≤–∞—è"},
            "rat": "–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–∞ –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ä–æ–∫–∏ —Å —Ç–µ–∫—É—â–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.",
            "falsifiability_criterion": "–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–∏–ø —Ç—Ä–∏–≥–≥–µ—Ä–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –≥–∏–ø–æ—Ç–µ–∑–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–æ–≤–µ—Ä–≥–Ω—É—Ç–æ–π."
        },
        source="diagnosis"
    )
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä
    result = handler.handle_trigger(context)
    
    # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    logger.info(f"–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ hypothesis_create: {result.success}")
    if result.success:
        print(f"‚úÖ –¢—Ä–∏–≥–≥–µ—Ä hypothesis_create —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª!")
    else:
        print(f"‚ùå –¢—Ä–∏–≥–≥–µ—Ä hypothesis_create –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π: {result.message}")
    
    return result.success

def test_standard_trigger():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞."""
    logger.info("–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞")
    
    # –ü–æ–ª—É—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
    handler = get_handler(report_progress_func=report_progress)
    
    # –°–æ–∑–¥–∞–µ–º –¥–∞—Ç—É-–≤—Ä–µ–º—è –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
    
    # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞
    context = TriggerContext(
        trigger_type=TriggerType.STANDARD_CREATE,
        data={
            "title": f"–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç {timestamp}",
            "description": "–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤",
            "file_path": f"test_standard_{timestamp}.md",
            "properties": {"status": "Active", "version": "1.0", "tags": ["test", "standard", "trigger"]}
        },
        source="diagnosis"
    )
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä
    result = handler.handle_trigger(context)
    
    # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    logger.info(f"–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ standard_create: {result.success}")
    if result.success:
        print(f"‚úÖ –¢—Ä–∏–≥–≥–µ—Ä standard_create —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª!")
    else:
        print(f"‚ùå –¢—Ä–∏–≥–≥–µ—Ä standard_create –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π: {result.message}")
    
    return result.success

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞."""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    if len(sys.argv) > 1:
        trigger_type = sys.argv[1].lower()
    else:
        trigger_type = "all"
    
    print(f"üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Ç–∏–ø–∞: {trigger_type}")
    
    try:
        if trigger_type == "task" or trigger_type == "all":
            test_task_trigger()
        
        if trigger_type == "incident" or trigger_type == "all":
            test_incident_trigger()
        
        if trigger_type == "hypothesis" or trigger_type == "all":
            test_hypothesis_trigger()
        
        if trigger_type == "standard" or trigger_type == "all":
            test_standard_trigger()
        
        print("üèÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞: {e}")
        traceback.print_exc()
        print(f"‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()