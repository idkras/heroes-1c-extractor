# Абстрактные логические идентификаторы и ссылки

## Описание

Система абстрактных логических идентификаторов (CLI) предназначена для ссылок на документы через логические идентификаторы вместо физических путей в файловой системе. Это обеспечивает следующие преимущества:

1. **Независимость от физического расположения** - документы можно перемещать без нарушения ссылок
2. **Семантическая ясность** - идентификаторы отражают тип и назначение документа
3. **Устойчивость к реорганизации** - структура каталогов может меняться, но ссылки остаются рабочими

## Форматы абстрактных ссылок

Система поддерживает два формата абстрактных ссылок:

### 1. Прямой формат (тип:идентификатор)

```
[Текст ссылки](task:todo)
```

### 2. URL формат с протоколом abstract://

```
[Текст ссылки](abstract://task:todo)
```

### 3. Ссылки с фрагментами (разделы документа)

Оба формата поддерживают фрагменты для ссылок на конкретные разделы документа:

```
[Текст ссылки](task:todo#section)
[Текст ссылки](abstract://task:todo#section)
```

## Типы документов и соглашения по именованию

Идентификаторы имеют формат `тип:идентификатор`, где:

- **тип** - категория документа (task, standard, incident, project, etc.)
- **идентификатор** - уникальное имя внутри категории

Примеры:
- `task:todo` - список текущих задач
- `task:todo.archive` - архив задач
- `standard:registry` - стандарт реестра
- `standard:process_task` - стандарт рабочих задач
- `standard:ticket` - стандарт оформления тикетов
- `standard:goal_map` - стандарт карты целей
- `standard:ai_incident` - стандарт AI-инцидентов
- `incident:ai` - инциденты, связанные с AI

## Использование CLI инструмента

### Регистрация логического идентификатора

```
python abstract_links_cli.py register "[путь/к/файлу]" "тип:идентификатор"
```

Пример:
```
python abstract_links_cli.py register "[todo · incidents]/todo.md" "task:todo"
```

### Преобразование ссылок в документе

#### Физические пути -> абстрактные идентификаторы
```
python abstract_links_cli.py convert path/to/document.md
```

#### Абстрактные идентификаторы -> физические пути
```
python abstract_links_cli.py convert path/to/document.md --to-physical
```

### Получение документа по логическому идентификатору

```
python abstract_links_cli.py get "тип:идентификатор" [--content]
```

### Список зарегистрированных идентификаторов

```
python abstract_links_cli.py list
```

### Поиск с учетом логических идентификаторов

```
python abstract_links_cli.py search "поисковый запрос"
```

### Расширенный поиск и анализ ссылок

Для расширенного поиска и анализа ссылок используйте инструмент `search_abstractions.py`:

#### Семантический поиск с форматированием результатов

```
# Поиск с абстрактными идентификаторами в формате Markdown
python search_abstractions.py search "поисковый запрос" --format markdown

# Поиск с фильтрацией по типу документа
python search_abstractions.py search "поисковый запрос" --type standard --format url
```

#### Анализ ссылок в документе

```
# Проверка всех абстрактных ссылок в документе
python search_abstractions.py analyze path/to/document.md
```

## API для работы с абстрактными идентификаторами

API доступно на порту 5001 и предоставляет следующие конечные точки:

- `/indexer/abstract/list` - список логических идентификаторов
- `/indexer/abstract/document/{id}` - получение документа по идентификатору
- `/indexer/abstract/register` (POST) - регистрация логического идентификатора
- `/indexer/abstract/convert` (POST) - преобразование ссылок в документе

## Пример использования в Markdown

```markdown
# Документация с абстрактными ссылками

См. [список задач](task:todo) для текущих задач.
Завершенные задачи перемещены в [архив](abstract://task:todo.archive).
Информация об инцидентах доступна в [базе инцидентов](incident:ai).
```