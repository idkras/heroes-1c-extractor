# –®–∞–±–ª–æ–Ω —Å–∏—Å—Ç–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ Python

–≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –¥–ª—è Python –ø—Ä–æ–µ–∫—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –ª–∏–Ω—Ç–µ—Ä—ã, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å VS Code/Cursor.

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ —ç—Ç–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –≤ –∫–æ—Ä–µ–Ω—å –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cp -r code-quality-template/* /path/to/your/project/
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ development –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements-dev.txt

# –ò–ª–∏ —á–µ—Ä–µ–∑ make (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
make setup
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pre-commit

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pre-commit —Ö—É–∫–æ–≤
pre-commit install
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
make check

# –ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
make lint
make format
make test
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
code-quality-template/
‚îú‚îÄ‚îÄ CODE_QUALITY_AUTOMATION.md    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ pyproject.toml                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ .pre-commit-config.yaml       # Pre-commit —Ö—É–∫–∏
‚îú‚îÄ‚îÄ Makefile                      # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ requirements-dev.txt          # Development –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .vscode/
‚îÇ   ‚îú‚îÄ‚îÄ settings.json            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VS Code
‚îÇ   ‚îî‚îÄ‚îÄ tasks.json               # –ó–∞–¥–∞—á–∏ VS Code
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ ruff_monitor.py          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îî‚îÄ‚îÄ .cursor/
    ‚îú‚îÄ‚îÄ mcp-enhanced.json        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Cursor
    ‚îî‚îÄ‚îÄ rules/
        ‚îú‚îÄ‚îÄ cursor_rules.mdc     # –ü—Ä–∞–≤–∏–ª–∞ Cursor
        ‚îú‚îÄ‚îÄ dev_workflow.mdc     # –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å
        ‚îî‚îÄ‚îÄ self_improve.mdc     # –°–∞–º–æ—É–ª—É—á—à–µ–Ω–∏–µ
```

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –û–±–Ω–æ–≤–∏—Ç–µ pyproject.toml

–ò–∑–º–µ–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏ –≤ `pyproject.toml`:

```toml
[project]
name = "your-project-name"
version = "1.0.0"
description = "Your project description"
authors = [
    {name = "Your Name", email = "your.email@example.com"}
]

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ–¥ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
dependencies = [
    # –í–∞—à–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
]

[tool.mypy]
# –û–±–Ω–æ–≤–∏—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø–æ–¥ –≤–∞—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
exclude = [
    "your_project/tests/.*",
    "your_project/migrations/.*",
]
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .gitignore

–î–æ–±–∞–≤—å—Ç–µ –≤ `.gitignore`:

```gitignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual environments
.env
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# IDE
.vscode/settings.json
.idea/
*.swp
*.swo

# Testing
.pytest_cache/
.coverage
htmlcov/
.tox/
.cache
nosetests.xml
coverage.xml
*.cover
.hypothesis/

# Linting
.ruff_cache/
.mypy_cache/

# Reports
bandit-report.json
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ VS Code

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è VS Code:
- Python
- Ruff
- Black Formatter
- MyPy Type Checker

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Make –∫–æ–º–∞–Ω–¥—ã

```bash
make help          # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
make setup         # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π + pre-commit
make install       # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make install-dev   # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ development –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make test          # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
make test-fast     # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ –ø–æ–∫—Ä—ã—Ç–∏—è
make lint          # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ª–∏–Ω—Ç–µ—Ä–æ–≤
make format        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make check         # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ñ–æ—Ä–º–∞—Ç + –ª–∏–Ω—Ç + —Ç–µ—Å—Ç—ã)
make clean         # –û—á–∏—Å—Ç–∫–∞ cache —Ñ–∞–π–ª–æ–≤
make ruff-check    # –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ Ruff
make ruff-fix      # –ê–≤—Ç–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Ruff
make ruff-watch    # –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
make qa-ruff       # QA —Ü–∏–∫–ª —Å Ruff
```

### VS Code –∑–∞–¥–∞—á–∏

–í VS Code (Ctrl+Shift+P ‚Üí "Tasks: Run Task"):
- **Ruff Watch (workspace)** - —Ñ–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Ruff Fix All** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º
- **Ruff Format All** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

### –ü—Ä—è–º—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# Ruff
ruff check .              # –ü—Ä–æ–≤–µ—Ä–∫–∞
ruff check . --fix        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –∞–≤—Ç–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
ruff format .             # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

# MyPy
mypy .                    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

# Black
black .                   # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

# Bandit
bandit -r .               # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

# Safety
safety check              # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π

# Pre-commit
pre-commit run --all-files # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ö—É–∫–æ–≤
```

## üö® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### Pre-commit —Ö—É–∫–∏ (–ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ)
- Black - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Ruff - –ª–∏–Ω—Ç–∏–Ω–≥
- MyPy - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- Bandit - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Safety - —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### VS Code (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
- Ruff lint –ø—Ä–∏ –Ω–∞–±–æ—Ä–µ
- –ê–≤—Ç–æ-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
python scripts/ruff_monitor.py
```

## üìä –û—Ç—á–µ—Ç—ã –∏ –º–µ—Ç—Ä–∏–∫–∏

### –û—Ç—á–µ—Ç—ã
- **Bandit:** `bandit-report.json`
- **Coverage:** `htmlcov/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- **Ruff:** –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
- **MyPy:** –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

### –¶–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:** >80%
- **–ü—Ä–æ–±–ª–µ–º—ã –ª–∏–Ω—Ç–µ—Ä–∞:** 0
- **–ü—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–æ–≤:** 0
- **–ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** 0

## üîÑ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### GitHub Actions

–°–æ–∑–¥–∞–π—Ç–µ `.github/workflows/ci.yml`:

```yaml
name: CI

on: [push, pull_request]

jobs:
  quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - run: pip install -r requirements-dev.txt
      - run: pre-commit install
      - run: make check
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–æ–¥–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
2. **–ü—Ä–æ–≤–µ—Ä–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
3. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–æ–º–º–∏—Ç–æ–≤** —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∫–∞—á–µ—Å—Ç–≤–∞
4. **–°—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫
5. **–ü—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –∫–æ–¥–∞
6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å AI –∞–≥–µ–Ω—Ç–∞–º–∏** (Cursor)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [CODE_QUALITY_AUTOMATION.md](CODE_QUALITY_AUTOMATION.md) - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- [DEVELOPMENT.md](DEVELOPMENT.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Ruff –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
pip install ruff
```

### Pre-commit –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
pre-commit install
pre-commit run --all-files
```

### MyPy –æ—à–∏–±–∫–∏
```bash
# –î–æ–±–∞–≤—å—Ç–µ —Ç–∏–ø—ã –≤ –∫–æ–¥ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ pyproject.toml
mypy . --ignore-missing-imports
```

### VS Code –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Ruff
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VS Code
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.vscode/settings.json`
