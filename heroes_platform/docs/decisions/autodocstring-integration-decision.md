# Архитектурная запись решения: Интеграция autoDocstring с JTBD стандартами

## Проблема
autoDocstring установлен в проекте, но не используется системно. Отсутствует интеграция с существующими стандартами TDD, JTBD и MCP workflow для автоматизации документирования.

## Варианты решения

### Вариант 1: Полная замена на sphinx-autodoc
**Плюсы:**
- Полная интеграция с существующими инструментами
- Автоматическая генерация API документации
- Поддержка кастомных шаблонов

**Минусы:**
- Требует переписывания существующих docstrings
- Сложная настройка
- Не интегрируется с VS Code workflow

### Вариант 2: Настройка autoDocstring с кастомными шаблонами
**Плюсы:**
- Сохраняет существующий workflow разработчиков
- Быстрая настройка
- Интеграция с VS Code

**Минусы:**
- Ограниченные возможности кастомизации
- Зависимость от VS Code

### Вариант 3: Гибридный подход (ВЫБРАН)
**Плюсы:**
- Сочетает преимущества обоих подходов
- Поэтапная миграция
- Минимальные риски

**Минусы:**
- Более сложная архитектура
- Требует больше времени на настройку

## Выбранный вариант
**Гибридный подход:** Настройка autoDocstring с кастомными JTBD шаблонами + интеграция с MCP workflow для автоматизации.

**MCP конфигурация:** Автоматическая настройка через `make setup-mcp` для интеграции с Cursor IDE.

## Компромиссы
- **Время vs Качество:** Поэтапная реализация для снижения рисков
- **Автоматизация vs Гибкость:** Баланс между автоматизацией и возможностью ручной настройки
- **Стандартизация vs Скорость:** Приоритет стандартизации над скоростью разработки

## План отката
1. **Релиз 0-1:** Если autoDocstring не поддерживает кастомные шаблоны → переход на sphinx-autodoc
2. **Релиз 2-3:** Если MCP интеграция не работает → ручная генерация docstrings
3. **Релиз 3:** Если автоматизация нестабильна → откат к ручному процессу

## Критерии успеха
- Gap Score: 25/100 → 95+/100
- Покрытие docstrings: 94% → 100% в JTBD формате
- Автоматизация: 0% → 100% генерации и валидации
- Интеграция: Работающая интеграция с существующими стандартами

## Дата принятия решения
21 августа 2025, 17:00 CET

## Ответственный
AI Assistant (CTO-lead role)

## Статус
Утверждено к реализации
